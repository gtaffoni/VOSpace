<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"><head><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="http://www.ivoa.net/misc/ivoa_doc.css"/><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="http://www.ivoa.net/misc/ivoa_wd.css"/><style xmlns="http://www.w3.org/1999/xhtml" type="text/css">
				div#versionstatement, div#dateline {
					color: #005A9C;
					font-size: 150%;
				}

				p.parsep {
					overflow: hidden;
					height: 0pt;
					margin-top:0.5ex;
					margin-bottom:0.5ex;
				}

				div.admonition {
					width: 30em;
					position: relative;
					float: right;
					background-color: #dddddd;
					font-size: 80%;
					margin: 1ex;
					padding: 3pt;
					overflow: auto;
				}
				
				p.admonition-type {
					background-color: #444444;
					color: #ffffff;
					margin-top: 0px;
					padding-left: 5pt;
					padding-top: 5pt;
					padding-bottom: 5pt;
					font-weight: bold;
				}

				a.tth_citation, a.tth_citeref {
					color: #002A5C;
					text-decoration: none;
				}

				.xmlel {
					font-family: monospace;
					font-style: italic;
				}

				.vorent {
					font-variant: small-caps;
				}

				table {
					border-collapse: collapse;
					border-spacing: 0px;
				}

				table.tabular {
					margin-top: 2ex;
					margin-bottom: 1ex;
					margin-left: 0.5em;
				}

				table.tabular > * > tr > td, table.tabular > tr > td {
					border-top: 1pt solid gray;
					border-bottom: 1pt solid gray;
					padding: 2pt;
				}

				dt {
					margin-top: 0.5ex;
				}

				.redaction {
					background-color: #ffff33;
				}

				span.nolinkurl {
					font-family: monospace;
				}

				.basicstyle__footnotesize {
					font-size: 80%;
				}
			</style><meta name="GENERATOR" content="TtH 4.08"/><meta http-equiv="Content-type" content="text/html;charset=UTF-8"/></head><div>


<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>


<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
    
  
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>






<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

  <div><table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" cellpadding="0" width="450"><tr><td><a href="http://www.ivoa.net/"><img height="169" alt="IVOA" src="http://www.ivoa.net/icons/IVOA_wb_300.jpg" width="300" border="0"/></a></td><td><div style="padding: 3.6pt 7.2pt;"><p><b><i><span style="font-size: 14pt; color: rgb(0, 90, 156);"><span> </span>I</span></i></b><i><span style="font-size: 14pt; color: rgb(0, 90, 156);">nternational</span></i></p><p><b><i><span style="font-size: 14pt; color: rgb(0, 90, 156);"><span>   </span>V</span></i></b><i><span style="font-size: 14pt; color: rgb(0, 90, 156);">irtual</span></i></p><p><b><i><span style="font-size: 14pt; color: rgb(0, 90, 156);"><span> </span><span>  </span>O</span></i></b><i><span style="font-size: 14pt; color: rgb(0, 90, 156);">bservatory</span></i></p><p><b><i><span style="font-size: 14pt; color: rgb(0, 90, 156);">A</span></i></b><i><span style="font-size: 14pt; color: rgb(0, 90, 156);">lliance</span></i><i/></p></div><i/></td></tr></table><br xmlns="http://www.w3.org/1999/xhtml"/></div><h1 xmlns="http://www.w3.org/1999/xhtml">VOSpace </h1><div xmlns="http://www.w3.org/1999/xhtml" id="versionstatement">
			Version 2.1</div><div xmlns="http://www.w3.org/1999/xhtml" id="dateline">IVOA Working Draft  <span xmlns="" id="docdate">20150601</span></div><dl xmlns="http://www.w3.org/1999/xhtml" id="docmeta"><dt>Working Group</dt><dd xmlns="" id="ivoagroup">Grid and Web Services Working Group</dd><dt>This Version</dt><dd><a class="currentlink" href="http://www.ivoa.net/documents/VOSpace/201560">http://www.ivoa.net/documents/VOSpace/201560</a></dd><dt>Latest Version</dt><dd><a class="latestlink" href="http://www.ivoa.net/documents/VOSpace">http://www.ivoa.net/documents/VOSpace</a></dd><dt>Previous Versions</dt><dd><ul class="previousversions"><li xmlns="" class="previousversion">
	  <a href="http://www.ivoa.net/documents/VOSpace/20140805/index.html">WD-VOSpace-2.1-20140805</a></li><li xmlns="" class="previousversion">
	  <a href="http://www.ivoa.net/documents/VOSpace/20130329/index.html">REC-VOSpace-2.0-20130329</a></li><li xmlns="" class="previousversion">
	  <a href="http://www.ivoa.net/documents/VOSpace/20121221/index.html">PR-VOSpace-2.0-20121221</a></li><li xmlns="" class="previousversion">
	  <a href="http://www.ivoa.net/documents/VOSpace/20120824/index.html">PR-VOSpace-2.0-20120824</a></li><li xmlns="" class="previousversion">
	  <a href="http://www.ivoa.net/documents/VOSpace/20111202/index.html">PR-VOSpace-2.0-20111202</a></li><li xmlns="" class="previousversion">
	  <a href="http://www.ivoa.net/documents/VOSpace/20110628/index.html">WD-VOSpace-2.0-20110628</a></li><li xmlns="" class="previousversion">
	  <a href="http://www.ivoa.net/documents/VOSpace/20101112/index.html">WD-VOSpace-2.0-20101112</a></li><li xmlns="" class="previousversion">
	  <a href="http://www.ivoa.net/documents/VOSpace/20100323/index.html">WD-VOSpace-2.0-20100323</a></li><li xmlns="" class="previousversion">
	  <a href="http://www.ivoa.net/documents/VOSpace/20090513/index.html">WD-VOSpace-2.0-20090513</a></li></ul></dd><dt>Author(s)</dt><dd><ul class="authors"><li xmlns="" class="author">Matthew Graham</li><li xmlns="" class="author">Dave Morris</li><li xmlns="" class="author">Guy Rixon</li><li xmlns="" class="author">Pat Dowler</li><li xmlns="" class="author">Andre Schaaff</li><li xmlns="" class="author">Doug Tody</li><li xmlns="" class="author">Brian Major</li></ul></dd><dt>Editor(s)</dt><dd><ul class="editors"><li xmlns="" class="editor">Matthew Graham</li><li xmlns="" class="editor">Brian Major</li></ul></dd></dl> 
    <div id="abstract"><h2>Abstract</h2>
  
  
VOSpace is the IVOA interface to distributed storage. This specification presents the second RESTful version of the interface.  Except for minor additions to the 2.1 specification, it is functionally equivalent to the SOAP-based VOSpace 1.1 specification. Note that all 1.x VOSpace clients will not work with this new version of the interface.  VOSpace 2.0 and 2.1 clients will work with 2.1 services.  VOSpace 2.1 clients, however, will not work with VOSpace 2.0 services.
    </div> 
      <h2>Status of this Document</h2>
      <p xmlns="http://www.w3.org/1999/xhtml" id="statusdecl"><em>
                  This is an IVOA Working Draft for review by IVOA members
                  and other interested parties.  It is a draft document and
                  may be updated, replaced, or obsoleted by other documents
                  at any time. It is inappropriate to use IVOA Working Drafts
                  as reference materials or to cite them as other than "work
                  in progress".
              </em></p>
    
<h1>Contents </h1><a href="#tth_sEc1">1  Introduction</a><br/>
    <a href="#tth_sEc1.1">1.1  Typical use of a VOSpace service</a><br/>
    <a href="#tth_sEc1.2">1.2  Role within the VO Architecture</a><br/>
    <a href="#tth_sEc1.3">1.3  Document roadmap</a><br/><a href="#tth_sEc2">2  VOSpace identifiers</a><br/>
    <a href="#tth_sEc2.1">2.1  Identifier resolution</a><br/><a href="#tth_sEc3">3  VOSpace data model</a><br/>
    <a href="#tth_sEc3.1">3.1  Nodes and node types</a><br/>
    <a href="#tth_sEc3.2">3.2  Properties</a><br/>
        <a href="#tth_sEc3.2.1">3.2.1  Property values</a><br/>
        <a href="#tth_sEc3.2.2">3.2.2  Property identifiers</a><br/>
        <a href="#tth_sEc3.2.3">3.2.3  Property descriptions</a><br/>


        <a href="#tth_sEc3.2.4">3.2.4  Standard properties</a><br/>
    <a href="#tth_sEc3.3">3.3  Capabilities</a><br/>
        <a href="#tth_sEc3.3.1">3.3.1  Example use cases</a><br/>
        <a href="#tth_sEc3.3.2">3.3.2  Capability identifiers</a><br/>
        <a href="#tth_sEc3.3.3">3.3.3  Capability descriptions</a><br/>
        <a href="#tth_sEc3.3.4">3.3.4  UI display name</a><br/>
        <a href="#tth_sEc3.3.5">3.3.5  Standard capabilities</a><br/>
    <a href="#tth_sEc3.4">3.4  Views</a><br/>
        <a href="#tth_sEc3.4.1">3.4.1  Example use cases</a><br/>

        <a href="#tth_sEc3.4.2">3.4.2  View identifiers</a><br/>
        <a href="#tth_sEc3.4.3">3.4.3  View descriptions</a><br/>


        <a href="#tth_sEc3.4.4">3.4.4  Default views</a><br/>


        <a href="#tth_sEc3.4.5">3.4.5  Container views</a><br/>
    <a href="#tth_sEc3.5">3.5  Protocols</a><br/>
        <a href="#tth_sEc3.5.1">3.5.1  Protocol identifiers</a><br/>
        <a href="#tth_sEc3.5.2">3.5.2  Protocol descriptions</a><br/>

        <a href="#tth_sEc3.5.3">3.5.3  Standard protocols</a><br/>
        <a href="#tth_sEc3.5.4">3.5.4  Custom protocols</a><br/>


    <a href="#tth_sEc3.6">3.6  Transfers</a><br/>
        <a href="#tth_sEc3.6.1">3.6.1  XML Document Transfers</a><br/>
        <a href="#tth_sEc3.6.2">3.6.2  URL Parameter Transfers</a><br/>
        <a href="#tth_sEc3.6.3">3.6.3  Service-initiated transfers</a><br/>
        <a href="#tth_sEc3.6.4">3.6.4  Client-initiated transfers</a><br/>
    <a href="#tth_sEc3.7">3.7  Searches</a><br/>
    <a href="#tth_sEc3.8">3.8  REST bindings</a><br/><a href="#tth_sEc4">4  Access Control</a><br/><a href="#tth_sEc5">5  Web service operations</a><br/>

    <a href="#tth_sEc5.1">5.1  Service metadata</a><br/>
        <a href="#tth_sEc5.1.1">5.1.1  getProtocols</a><br/>






        <a href="#tth_sEc5.1.2">5.1.2  getViews</a><br/>






        <a href="#tth_sEc5.1.3">5.1.3  getProperties</a><br/>






    <a href="#tth_sEc5.2">5.2  Creating and manipulating data nodes</a><br/>
        <a href="#tth_sEc5.2.1">5.2.1  createNode</a><br/>






        <a href="#tth_sEc5.2.2">5.2.2  moveNode</a><br/>






        <a href="#tth_sEc5.2.3">5.2.3  copyNode</a><br/>




        <a href="#tth_sEc5.2.4">5.2.4  deleteNode</a><br/>




    <a href="#tth_sEc5.3">5.3  Accessing metadata</a><br/>
        <a href="#tth_sEc5.3.1">5.3.1  getNode</a><br/>




        <a href="#tth_sEc5.3.2">5.3.2  setNode</a><br/>





    <a href="#tth_sEc5.4">5.4  Transferring data</a><br/>
        <a href="#tth_sEc5.4.1">5.4.1  pushToVoSpace</a><br/>







        <a href="#tth_sEc5.4.2">5.4.2  pullToVoSpace</a><br/>





        <a href="#tth_sEc5.4.3">5.4.3  pullFromVoSpace</a><br/>










        <a href="#tth_sEc5.4.4">5.4.4  pushFromVoSpace</a><br/>




    <a href="#tth_sEc5.5">5.5  Fault arguments</a><br/><a href="#tth_sEc6">6  Changes since last version</a><br/><a href="#tth_sEcA">A  Machine readable definitions</a><br/>
    <a href="#tth_sEcA.1">A.1  Message schema</a><br/><a href="#tth_sEcB">B  Compliance matrix</a><br/><a href="#tth_sEcC">C  Standard properties</a><br/><a href="#tth_sEcD">D  Changes from Previous Versions</a><br/><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<h2>Acknowledgments</h2>
<a id="sec:acknowledgments">
</a>
This document derives from discussions among the Grid and Web Services working group of the IVOA.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This document has been developed with support from the National Science Foundation's Information Technology Research Program under Cooperative Agreement AST0122449 with the John Hopkins University, from the UK Science and Technology Facilities Council (STFC), and from the European Commission's Sixth Framework Program via the Optical Infrared Coordination Network (OPTICON).

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<h2>Conformance-related definitions</h2>
<a id="sec:conformance-related definitions">
</a>
The words "MUST", "SHALL", "SHOULD", "MAY", "RECOMMENDED", and
"OPTIONAL" (in upper or lower case) used in this document are to be
interpreted as described in IETF standard, 
	
	.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The <em>Virtual Observatory (VO)</em> is
general term for a collection of federated resources that can be used
to conduct astronomical research, education, and outreach.
The <a href="http://www.ivoa.net">International
Virtual Observatory Alliance (IVOA)</a> is a global
collaboration of separately funded projects to develop standards and
infrastructure that enable VO applications.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc1"/><h2>
1  Introduction</h2>
<a id="sec:introduction">
</a>
VOSpace is the IVOA interface to distributed storage. It specifies how VO agents and applications can use network attached data stores to persist and exchange data in a standard way.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A VOSpace web service is an access point for a distributed storage network. Through this access point, a client can:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> add or delete data objects
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> manipulate metadata for the data objects
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> obtain URIs through which the content of the data objects can be accessed
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul>
VOSpace does not define how the data is stored or transferred, only the control messages to gain access. Thus, the VOSpace interface can readily be added to an existing storage system.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
When we speak of "a VOSpace", we mean the arrangement of data accessible through one particular VOSpace service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Each data object within a VOSpace service is represented as a node and has a description called a representation. A useful analogy to have in mind when reading this document is that a node is equivalent to a file.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Nodes in VOSpace have unique identifiers expressed as URIs in the `vos' scheme, as defined below.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
VOSpace 2.0 did not introduce any new functionality to that already offered by prior (SOAP-based) versions of the interface (VOSpace 1.1) but defines a RESTful binding for the interface. VOSpace 2.1 introduces minor changes to VOSpace 2.0 mainly addressing access control and operation optimizations.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc1.1"/><h3>
1.1  Typical use of a VOSpace service</h3>
<a id="subsec:typical use of a vospace service">
</a>
A typical use case for VOSpace is uploading a local data file to a remote VOSpace service. This is a two-stage process: creating a description of the data file (representation) in the VOSpace including any metadata (its properties) that they want to associate with it (e.g., MIME type), and defining the transfer operation that will actually see the data file bytes uploaded to the VOSpace service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Let's consider the first step: the user provides a XML description of the data file which they HTTP PUT to the appropriate VOSpace URI - this will be the HTTP identifier for the data file in the VOSpace, e.g. http://server.example.com/vospace/nodes/mytable1. The description will resemble this:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:node xmlns="http://www.ivoa.net/xml/VOSpace/v2.1"
    xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" 
    uri="vos://example.com!vospace/mytable1"
    xs:type="vos:UnstructuredDataNode"&gt;  
    &lt;vos:properties&gt; 
        &lt;vos:property uri="ivo://ivoa.net/vospace/core#mimetype"&gt;
            text/xml
        &lt;/vos:property&gt;     
    &lt;/vos:properties&gt; 
&lt;/vos:node&gt; 
</pre></div>

Note that the node path is specified in two places on this request, and that they must match:

<ul><li> In the path of the URL in which the client performs the HTTP PUT
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> In the node uri attribute of the XML description
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service will reply with an amended version of the representation containing service-specific details in addition to the information supplied by the user. These will include data formats that the service can handle for the type of node created in the VOSpace, third-party interfaces (capabilities) to the data that the service offers and system metadata.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The user will then describe the data format (the view) they want to use in uploading the file, e.g. VOTable, and the transport protocol (the protocol) that they want to employ to upload the file, e.g. HTTP PUT. This will result in the HTTP POSTing of a XML description of the transfer request to the appropriate VOSpace transfer URL:  http://server.example.com/vospace/synctrans. The description will resemble this:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
    &lt;vos:target&gt;vos://example.com!vospace/mytable1&lt;/vos:target&gt;
    &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt; 
    &lt;vos:view uri="ivo://ivoa.net/vospace/core#votable"/&gt; 
    &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"/&gt;  
&lt;/vos:transfer&gt;
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service will reply with a redirect to a location with an amended version of the transfer representation that contains, for the protocols the service supports, URL endpoints that the user may HTTP PUT the data file to, e.g. http://storage1.example.com/vospace/mytable1.  The user will then use a regular HTTP client to transfer (PUT) the local file to one of the endpoints. This illustrates an important point about VOSpace - it is only concerned with the server-side management of data storage and transfer. A client negotiates the details of a data transfer with a VOSpace service but the actual transfer of bytes across a network is handled by other tools.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Similarly, when a user wants to retrieve a data file from a VOSpace service, they will specify the data format (view) they want to use in downloading the file (e.g. VOTable), and the transport protocol (the protocol) that they want to employ to download the file (e.g. HTTP GET), and then HTTP POST a XML description of this transfer request to the VOSpace transfer URL (e.g. http://server.example.com/vospace/synctrans). The description will resemble this:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
    &lt;vos:target&gt;vos://example.com!vospace/mytable1&lt;/vos:target&gt;
    &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt; 
    &lt;vos:view uri="ivo://ivoa.net/vospace/core#votable"/&gt; 
    &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"/&gt;  
&lt;/vos:transfer&gt;
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service will reply with a redirect to a location that contains an amended version of the transfer representation that contains, for the protocols the service supports, the URL endpoints that the user may HTTP GET the data from, e.g. http://storage1.example.com/vospace/myDataNode. The user can then download the data file by pointing an HTTP client (e.g. web browser) at the specified endpoint.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc1.2"/><h3>
1.2  Role within the VO Architecture</h3>
<a id="subsec:role within the vo architecture">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The IVOA Architecture (Figure <a href="#fig:archdiag">1</a>) provides a high-level view of how IVOA standards work together to connect users and applications with providers of data and services, as depicted in the diagram in Figure  <a href="#fig:archdiag">1</a>.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<a id="tth_fIg1">
</a> <div style="text-align:center">
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<img src="archdiag.png" alt="archdiag.png"/><div style="text-align:center">Figure 1: VOSpace in the IVOA Architecture. This provides an interface to distributed storage. It specifies how applications can use networked data stores to persist and exchange data in a standardized fashion.</div>
<a id="fig:archdiag">
</a>
</div>
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In this architecture, users employ a variety of tools (from the User Layer) to discover and access archives and services of interest (represented in the Resource Layer). VOSpace provides an interface to storage resources containing the results of using these archives and services and also to other storage solutions, e.g., local disks, where users might want to transfer these results for further work. Items in these resources are referenced by a VOSpace identifier which is related to the standard IVOA Resource Identifier (see section 2). This version of VOSpace employs the UWS design pattern [UWS] to manage data transfers (see section <a href="#subsec:transfers">3.6</a>) and searches (see section <a href="#subsec:searches">3.7</a>). VOSpace instances may also employ the IVOA Single-Sign-On standard [SSO] for authentication purposes (see section <a href="#sec:access control">4</a>) and IVOA Credential Delegation Protocol [CDP] to delegate data transfers.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc1.3"/><h3>
1.3  Document roadmap</h3>
<a id="subsec:document roadmap">
</a>
The rest of this document is structured as follows:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In Section <a href="#sec:vospace identifiers">2</a>, we specify the URI syntax for identifying data objects (nodes) in VOSpace.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In Section <a href="#sec:vospace data model">3</a>, we present the data model that underpins the VOSpace architecture. This consists of a number of data structures, which have XML representations that are used across the wire in message exchanges with a VOSpace service. These structures represent:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> the data objects themselves (nodes)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> metadata that can be associated with a data object (properties)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> third-party interfaces to the data (capabilities)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> the data format used when transferring data objects across the wire (views)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> the transport protocol employed in a data transfer (protocols)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> the data transfer itself (transfers)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> searches of data objects (searches)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
We also describe the REST bindings between these representations and their URIs (HTTP identifiers).

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In Section <a href="#sec:access control">4</a>, we outline how security and access control policies are currently handled in VOSpace.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In Section <a href="#sec:web service operations">5</a>, we detail the operations that the VOSpace interface supports. These handle access to service-level metadata, the creation and manipulation of nodes within the VOSpace, access to node metadata (properties) and data transfer to and from the VOSpace.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In Appendex <a href="#sec:machine readable definitions">A</a>, we formally define the VOSpace interface with a machine readable description of its requests and responses and in Appendix <a href="#sec:compliance matrix">B</a>, we present a compliance matrix listing the mandatory behaviour required of a valid VOSpace 2.1 service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc2"/><h2>
2  VOSpace identifiers</h2>
<a id="sec:vospace identifiers">
</a>
The identifier for a node in VOSpace SHALL be a URI with the scheme vos.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Such a URI SHALL have the following parts with the meanings and encoding rules defined in <a href="https://www.ietf.org/rfc/rfc2396.txt">RFC2396</a>.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> scheme
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> naming authority
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> path
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> (optional) query
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> (optional) fragment identifier (with the expected semantics <a href="http://www.ivoa.net/documents/Notes/URIFragments/index.html">URI fragments in IVOA specifications</a>)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The naming authority for a VOSpace node SHALL be the VOSpace service through which the node was created. The authority part of the URI SHALL be constructed from the IVO registry identifier [IVORN] for that service by deleting the ivo:// prefix and changing all forward-slash characters(`/') in the resource key to exclamation marks (`!') or tildes (` ∼ '). Note that a service SHALL be consistent in its use of separator characters (`!' or ` ∼ ') when referring to its own data but SHALL accept either as valid in URIs in service requests. For the rest of the document, we shall use `!' as the default character.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This is an example of a possible VOSpace identifier.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<pre>
vos://example.com!vospace/myresults/siap-out-1.vot

</pre>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The URI scheme is <em>vos</em>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Using a separate URI scheme for VOSpace identifiers enables clients to distinguish between IVO registry identifiers and VOSpace identifiers.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<em>example.com!vospace</em> is the authority part of the URI, corresponding to the IVO registry identifier <em>ivo://example.com/vospace</em>.  This is the IVO registry identifier of the VOSpace service that contains the node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<em>/siap-out-1.vot</em> is the URI path

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Slashes in the URI path imply a hierarchical arrangement of data: the data object identified by <em>vos://example.com!vospace/myresults/siap-out-1.vot</em> is within the container identified by <em>vos://example.com!vospace/myresults</em>.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Literal space characters are also not allowed in URIs.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
All ancestors in the hierarchy SHALL be resolvable as containers (ContainerNodes), all the way up to the root node of the space (this precludes any system of implied hierarchy in the naming scheme for nodes with ancestors that are just logical entities and cannot be reified, e.g. the Amazon S3 system).

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A VOSpace identifier is globally unique, and identifies one specific node in a specific VOSpace service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The standardID for this specification SHALL be:

<pre>
ivo://ivoa.net/std/VOSpace/v2.1

</pre>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc2.1"/><h3>
2.1  Identifier resolution</h3>
<a id="subsec:identifier resolution">
</a>
A VOSpace identifier can be resolved to a HTTP endpoint for accessing representations of the node associated with it. A client SHOULD use the following procedure to resolve access to a VOSpace node from a VOSpace identifier:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Resolve HTTP service endpoint of VOSpace service with registry
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Append "nodes/" and the path following the naming authority part of the VOSpace identifier to the service endpoint
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Given the example identifier

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<pre>
    vos://example.com!vospace/container-6/siap-out-1.vot?foo=bar

</pre>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Processing the URI to resolve the VOSpace service would involve:
<br/><br/>
1.  Extract the IVO registry identifier of the VOSpace service by prepending an ivo scheme to the naming authority part:

<pre>
ivo://example.com/vospace

</pre>
2.  Resolve the IVO identifier in a registry and retrieve the access URL of the service endpoint:

<pre>
http://server.example.com/vospace

</pre>
3.  Append "nodes/" and the path part of the VOSpace identifier:

<pre>
http://server.example.com/vospace/nodes/container-6/siap-out-1.vot?foo=bar

</pre>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note that any fragment identifier in the identifier SHOULD be removed when resolving the identifier to a HTTP endpoint, consistent with the implied semantics of URI fragments (<a href="http://www.ivoa.net/documents/Notes/URIFragments/index.html">URI fragments in IVOA specifications</a>).

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc3"/><h2>
3  VOSpace data model</h2>
<a id="sec:vospace data model">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc3.1"/><h3>
3.1  Nodes and node types</h3>
<a id="subsec:nodes and node types">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
We refer to the arrangement of data accessible through one particular VOSpace service as "a VOSpace".

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Each data object within a VOSpace SHALL be represented as a node that is identified by a URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
There are different types of nodes and the type of a VOSpace node determines how the VOSpace service stores and interprets the node data.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The types are arranged in a hierarchy (see Figure  <a href="#fig:nodehierarchy">2</a>), with more detailed types inheriting the structure of more generic types.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<a id="tth_fIg2">
</a> <div style="text-align:center"><img src="vospace-node-hierarchy.png" alt="vospace-node-hierarchy.png"/><div style="text-align:center">Figure 2: Node hierarchy - This shows the inheritance structure for the different types of nodes in VOSpace.</div>
<a id="fig:nodehierarchy">
</a>
</div>
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The following types (and representations) are defined:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Node is the most basic type
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ContainerNode describes a data item that can contain other data items
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> DataNode describes a data item stored in the VOSpace
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> UnstructuredDataNode describes a data item for which the VOSpace does not understand the data format
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> StructuredDataNode describes a data item for which the space understands the format and may make transformations that preserve the meaning of the data.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> LinkNode describes a node that points to another node.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
When data is stored and retrieved from an <em>UnstructuredDataNode</em>, the bit pattern read back SHALL be identical to that written.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
When data is stored and retrieved from a <em>StructuredDataNode</em>, the bit pattern returned MAY be different to the original. For example, storing tabular data from a VOTable file will preserve the tabular data, but any comments in the original XML file may be lost.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A Node representation SHALL have the following elements:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: the vos:// identifier for the node, URI-encoded according to <a href="https://www.ietf.org/rfc/rfc2396.txt">RFC2396</a>.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>properties</em>: a set of metadata properties for the node
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>capabilities</em>: a third-party interface to a data object
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In addition, a <em>DataNode</em> representation SHALL have the following elements:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>accepts</em>: a list of the views (data formats) that the node can accept
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>provides</em>: a list of the views (data formats) that the node can provide
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A <em>DataNode</em> representation MAY have the following element:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>busy</em>: a boolean flag to indicate that the data associated with the node cannot be accessed.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The <em>busy</em> flag is used to indicate that an internal operation is in progress, and the node data is not available.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A <em>ContainerNode</em> representation SHALL have the following elements, in addition to those it inherits from the <em>Node</em> representation:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>nodes</em>: a list of the direct children, if applicable, that the container has. Each child is represented as a node subelement containing its vos:// identifier, URI-encoded according to <a href="https://www.ietf.org/rfc/rfc2396.txt">RFC2396</a>
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A <em>LinkNode</em> representation SHALL have the following elements, in addition to those it inherits from the Node representation:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>target</em>: the target URI, URI-encoded according to <a href="https://www.ietf.org/rfc/rfc2396.txt">RFC2396</a>
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The link target can be a URI that points to any type of resource, including other VOSpace Nodes (within the same VOSpace service or in another service), or external resources outside VOSpace altogether.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The properties of a <em>LinkNode</em> do not propagate to the target of the <em>LinkNode</em>, i.e., a property attached to a LinkNode does not also get attached to the target node. One use case is to enable third-party annotations to be associated with a resource but without the resource itself getting cluttered with unnecessary metadata. In this case, the client creates a <em>LinkNode</em> pointing to the resource in question and then adds the annotations as properties of the <em>LinkNode</em>.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Both the <em>ContainerNode</em> and the <em>LinkNode</em> SHALL have no data bytes associated with them.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The set of node types defined by this standard is closed; new types may be introduced only via new versions of the standard.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
To comply with the standard, a client or service SHALL be able to parse XML representations of all the node types defined in the current specification.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note: This does not require all services to support all of the Node types, just that it can process an XML request containing any of the types. If the service receives a request for a type that it does not support, the service SHOULD return a <em>TypeNotSupported</em> fault. The service SHALL NOT throw an XML parser error if it receives a request for a type that it does not support.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc3.2"/><h3>
3.2  Properties</h3>
<a id="subsec:properties">
</a>
<em>Properties</em> are simple string-based metadata properties associated with a node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Individual <em>Properties</em> should contain simple short string values, not large blocks of information. If a system needs to attach a large amount of metadata to a node, then it should either use multiple small <em>Properties</em>, or a single <em>Property</em> containing a URI or URL pointing to an external resource that contains the additional metadata.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A <em>Property</em> representation SHALL have the following elements:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: the Property identifier
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>value</em>: the string value of the Property
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>readOnly</em>: a boolean flag to indicate that the Property cannot be changed by the client
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Properties may be set by the client or the service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.2.1"/><h4>
3.2.1  Property values</h4>
<a id="subsubsec:property values">
</a>
Unless they have special meaning to the service or client, Properties are treated as simple string values.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
When a <em>Property</em> can take multiple values, e.g., a list of groups which can access a particular resource, these SHOULD be comma-separated, unless the property description defines a specific delimiter.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Some <em>Properties</em> may have meaning to the service; others may have meaning only to one specific type of client. A service implementation does not need to understand the meaning of all the <em>Properties</em> of a node. Any Properties that it does not understand can simply be stored as text strings.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.2.2"/><h4>
3.2.2  Property identifiers</h4>
<a id="subsubsec:property identifiers">
</a>
Every new type of <em>Property</em> SHALL require a unique URI to identify the <em>Property</em> and its meaning.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The rules for the <em>Property</em> identifiers are similar to the rules for namespace URIs in XML schema. The only restriction is that it SHALL be a valid (unique) URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> An XML schema namespace identifier can be just a simple URN, e.g. urn:my-namespace
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Within the IVOA, the convention for namespace identifiers is to use a HTTP URL pointing to the namespace schema or a resource describing it
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The current VOSpace schema defines <em>Property</em> identifiers as anyURI. The only restriction is that it SHALL be a valid (unique) URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> A <em>Property</em> URI can be a simple URN, e.g. urn:my-property
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This may be sufficient for testing and development on a private system, but it is not scalable for use on a public service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
For a production system, any new Properties SHOULD have unique URIs that can be resolved into to a description of the Property.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Ideally, these should be IVO registry URIs that point to a description registered in the IVO registry:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> ivo://my-registry/vospace/properties#my-property
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Using an IVO registry URI to identify Properties has two main advantages:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> IVO registry URIs are by their nature unique, which makes it easy to ensure that different teams do not accidentally use the same URI
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If the IVO registry URI points to a description registered in the IVO registry, this provides a mechanism to discover what the Property means
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.2.3"/><h4>
3.2.3  Property descriptions</h4>
<a id="subsubsec:property descriptions">
</a>
If the URI for a particular Property is resolvable, i.e. an IVO registry identifier or a HTTP URL, then it SHOULD point to an XML resource that describes the Property.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A Property description SHOULD describe the data type and meaning of a Property.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A PropertyDescription SHOULD have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: the formal URI of the Property
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>DisplayName</em>: A display name for the Property
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>Description</em>: A text block describing the meaning and validation rules of the Property
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A PropertyDescription MAY have the following OPTIONAL members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>UCD</em>: the Universal Content Descriptor (in the UCD1 + scheme) for the Property
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>Unit</em>: the unit of measurement of the Property
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The information in a Property description can be used to generate a UI for displaying and modifying the different types of Properties.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note that at the time of writing, the schema for registering PropertyDescriptions in the IVO registry has not been finalized.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>UI Display name  </b>
If a client is unable to resolve a Property identifier into a description, then it may just display the identifier as a text string:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> urn:modifieddate
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the client can resolve the Property identifier into a description, then the client may use the information in the description to display a human readable name and description of the Property:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Last modification date of the node data
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Property editors  </b>
If the client is unable to resolve a Property identifier into a description, or does not understand the type information defined in the description, then the client MAY treat the Property value as a simple text string.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the client can resolve the Property identifier into a description, then the client MAY use the information in the description to display an appropriate editing tool for the Property.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In the current version of the specification the rules for editing Properties are as follows:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> A service MAY impose validation rules on the values of specific types of Properties
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If a client attempts to set a Property to an invalid value, then the service MAY reject the change
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Where possible, the validation rules for a type of Property SHOULD be defined in the Property description
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Future versions of the VOSpace specification may extend the PropertyDescription to include more specific machine readable validation rules for a Property type.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note that at the time of writing, the schema for registering validation rules in PropertyDescriptions has not been finalized.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.2.4"/><h4>
3.2.4  Standard properties</h4>
<a id="subsubsec:standard properties">
</a>
Property URIs and PropertyDescriptions for the core set of Properties are registered under a StandardKeyEnumeration resource [VOStd] in the IVOA registry with the resource identifier ivo://ivoa.net/vospace/core. The following URIs SHOULD be used to represent the service properties:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> ivo://ivoa.net/vospace/core#title SHALL be used as the property URI denoting a name given to the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#creator SHALL be used as the property URI denoting an entity primarily responsible for making the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#subject SHALL be used as the property URI denoting the topic of the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#description SHALL be used as the property URI denoting an account of the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#publisher SHALL be used as the property URI denoting an entity responsible for making the resource available
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#contributor SHALL be used as the property URI denoting an entity responsible for making contributions to this resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#date SHALL be used as the property URI denoting a point or period of time associated with an event in the lifecycle of the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#type SHALL be used as the property URI denoting the nature or genre of the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#format SHALL be used as the property URI denoting the file format, physical medium, or dimensions of the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#identifier SHALL be used as the property URI denoting an unambiguous reference to the resource within a given context
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#source SHALL be used as the property URI denoting a related resource from which the described resource is derived
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#language SHALL be used as the property URI denoting a language of the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#relation SHALL be used as the property URI denoting a related resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#coverage SHALL be used as the property URI denoting the spatial or temporal topic of the resource, the spatial applicability of the resource, or the jurisdiction under which the resource is relevant
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#rights SHALL be used as the property URI denoting information about rights held in and over the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#availableSpace SHALL be used as the property URI denoting the amount of space available within a container
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#groupread SHALL be used as the property URI denoting the list of groups which can only read this resource (read-only)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#groupwrite SHALL be used as the property URI denoting the list of groups which can read and write to this resource (read-write)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#publicread SHALL be used as the property URI denoting whether this resource is world readable (anon-read-only)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#quota SHALL be used as the property URI denoting the value of a system quota on the resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#length SHALL be used as the property URI denoting the length or size of a resource
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#mtime SHALL be used as the property URI denoting the data modification time
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#ctime SHALL be used as the property URI denoting status change (aka metadata modification) time
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#btime SHALL be used as the property URI denoting initial creation time
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
However, this is not intended to be a closed list, different implementations are free to define and use their own Properties.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc3.3"/><h3>
3.3  Capabilities</h3>
<a id="subsec:capabilities">
</a>
A Capability describes a third-party interface to a node. One application of this would be to enable data access to a node or its contents using a 3rd party service interface.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A Capability representation SHALL have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: the Capability identifier
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>endpoint</em>: the endpoint URL to use for the third-party interface
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>param</em>: a set of parameters for the capability
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.3.1"/><h4>
3.3.1  Example use cases</h4>
<a id="subsubsec:example use cases">
</a>
A ContainerNode containing image files may offer a DAL SIAP capability so that the images in the container can be accessed using a SIAP service. In this way, a user could create a (DAL enabled) Container in VOSpace, transfer some images into it and then query the set of images using the SIAP interface.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Another example is a DataNode that provides a OpenStack Swift capability so that the OpenStack service API is exposed on that node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.3.2"/><h4>
3.3.2  Capability identifiers</h4>
<a id="subsubsec:capability identifiers">
</a>
Every new type of Capability SHALL require a unique URI to identify the Capability. The rules for the Capability identifiers are similar to the rules for namespace URIs in XML schema. The only restriction is that it SHALL be a valid (unique) URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> An XML schema namespace identifier can be just a simple URN, e.g. urn:my-namespace
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Within the IVOA, the convention for namespace identifiers is to use a HTTP URL pointing to the namespace schema, or a resource describing it.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The VOSpace schema defines Capability identifiers as anyURI. The only restriction is that it SHALL be a valid (unique) URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> A Capability URI can be a simple URN, e.g. urn:my-capability
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This may be sufficient for testing and development on a private system, but it is not suitable for use on a public service. For a production system, any new Capabilities SHOULD have unique URIs that can be resolved into a description of the Capability. Ideally, these SHOULD be IVO registry URIs that point to a description registered in the IVO registry:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> ivo://my-registry/vospace/capabilities#my-capability
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Using an IVO registry URI to identify Capabilities has two main advantages:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> IVO registry URIs are by their nature unique, which makes it easy to ensure that different teams do not accidentally use the same URI
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If the IVO registry URI points to a description registered in the IVO registry, this provides a mechanism to discover how to use the Capability.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.3.3"/><h4>
3.3.3  Capability descriptions</h4>
<a id="subsubsec:capability descriptions">
</a>
If the URI for a particular Capability is resolvable, i.e. an IVO registry identifier or a HTTP URL then it SHOULD point to an XML resource that describes the Capability.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A CapabilityDescription SHOULD describe the third-party interface and how it should be used in this context. A CapabilityDescription SHOULD have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: the formal URI of the Capability
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>DisplayName</em>: a simple display name of the Capability.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>Description</em>: a text block describing the third-party interface and how it should be used in this context.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note that at the time of writing, the schema for registering CapabilityDescriptions in the IVO registry has not been finalized.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.3.4"/><h4>
3.3.4  UI display name</h4>
<a id="subsubsection:ui display ame">
</a>
If a client is unable to resolve a Capability identifier into a description then it may just display the identifier as a text string:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Access data using urn:openstack
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If a client can resolve the Capability identifier into a description then the client may use the information in the description to display a human readable name and description of the Capability:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Access data using openstack
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.3.5"/><h4>
3.3.5  Standard capabilities</h4>
<a id="subsubsec:standard capabilities">
</a>
Capability URIs and CapabilityDescriptions for the core set of Capabilities are registered under a StandardKeyEnumeration resource [VOStd] in the IVOA registry with the resource identifier ivo://ivoa.net/vospace/core.. The following URIs SHALL be used to represent the service capabilities:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> ivo://ivoa.net/vospace/core#vospace-1.0 SHALL be used as the capability URI for a VOSpace 1.0 service
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#vospace-1.1 SHALL be used as the capability URI for a VOSpace 1.1 service
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#vospace-2.0 SHALL be used as the capability URI for a VOSpace 2.0 service
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#vospace-2.1 SHALL be used as the capability URI for a VOSpace 2.1 service
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul>
If a service implementation supports more than one version of the VOSpace interface then these capability URIs can be used with a VOSpace service to identify different VOSpace capabilities for a node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
One use case for this would be a VOSpace 2.1 client talking to a service that implements both VOSpace 2.0 and VOSpace 2.1, where the client is acting on behalf of a third party agent that only understands VOSpace 2.0. In this case, the client can use the information in the VOSpace 2.0 capability to direct the third party agent to the VOSpace 2.0 endpoint.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Other standard service interfaces will also be registered, e.g.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Cone Search
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> SIAP
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> SSAP
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> TAP
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
However, this is not intended to be a closed list and different implementations are free to define and use their own Capabilities.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc3.4"/><h3>
3.4  Views</h3>
<a id="subsec:views">
</a>
A View describes the data formats and contents available for importing or exporting data to or from a VOSpace node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The metadata for a DataNode contains two lists of Views.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>accepts</em>: is a list of Views that the service can accept for importing data into the Node
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>provides</em>: is a list of Views that the service can provide for exporting data from Node
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A View representation SHALL have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: an optional boolean flag to indicate that the View preserves the original bit pattern of the data
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>original</em>: a set of name-value pairs that can be used to specify additional arguments for the View
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.4.1"/><h4>
3.4.1  Example use cases</h4>
<a id="subsubsec:example use cases">
</a>
A simple VOSpace system that stores data as a binary files can just return the contents of the original file. The client supplies a View identifier when it imports the data, and the service uses this information to describe the data to other clients.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A file based system can use the special case identifier

<pre>
        ivo://ivoa.net/vospace/core#anyview

</pre>
to indicate that it will accept any data format or View for a Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
For example:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> A client imports a file into the service, specifying a View to describe the file contents
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service stores the data as a binary file and keeps a record of the View
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service can then use the View supplied by the client to describe the data to other clients
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This type of service is not required to understand the imported data, or to verify that it contents match the View, it treats all data as binary files.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Database store  </b>
A VOSpace system that stores data in database tables would need to be able to understand the data format of an imported file in order to parse the data and store it correctly. This means that the service can only accept a specific set of Views, or data formats, for importing data into the Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In order to tell the client what input data formats it can accept, the service publishes a list of specific Views in the accepts list for each Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
On the output side, a database system would not be able to provide access to the original input file. The contents of file would have been transferred into the database table and then discarded. The system has to generate the output results from the contents of the database table.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In order to support this, the service needs to be able to tell the client what Views of the data are available.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A database system may offer access to the table contents as either VOTable or FITS files, it may also offer zip or tar.gz compressed versions of these. In which case the system needs to be able to express nested file formats such as "zip containing VOTable" and "tar.gz containing FITS".

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A service may also offer subsets of the data. For example, a work flow system may only want to look at the table headers to decide what steps are required to process the data. If the table contains a large quantity of data, then downloading the whole contents just to look at the header information is inefficient. To make this easier, a database system may offer a 'metadata only' View of the table, returning a VOTable or FITS file containing just the metadata headers and no rows.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
So our example service may want to offer the following Views of a database table:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Table contents as FITS
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Table contents as VOTable
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Table contents as zip containing FITS
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Table contents as zip containing VOTable
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Table contents as tar.gz containing FITS
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Table contents as tar.gz containing VOTable
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Table metadata as FITS
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Table metadata as VOTable
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service would publish this information as a list of Views in the provides section of the metadata for each Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The VOSpace specification does not mandate what Views a service must provide. The VOSpace specification is intended to provide a flexible mechanism enabling services to describe a variety of different Views of data. It is up to the service implementation to decide what Views of the data it can accept and provide.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.4.2"/><h4>
3.4.2  View identifiers</h4>
<a id="subsubsec:view identifiers">
</a>
Every new type of View SHALL require a unique URI to identify the View and its content.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The rules for the View identifiers are similar to the rules for namespace URIs in XML schema. The only restriction is that it SHALL be a valid (unique) URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> An XML schema namespace identifier can be just a simple URN, e.g. urn:my-namespace
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Within the IVOA, the convention for namespace identifiers is to use a HTTP URL pointing to the namespace schema, or a resource describing it
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The current VOSpace schema defines View identifiers as anyURI. The only restriction is that it SHALL be a valid (unique) URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> A View URI can be a simple URN, e.g. urn:my-view
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This may be sufficient for testing and development on a private system, but it is not scalable for use on a public service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
For a production system, any new Views SHOULD have unique URIs that can be resolved into to a description of the View.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Ideally, these should be IVO registry URIs that point to a description registered in the IVO registry:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> ivo://my-registry/vospace/views#my-view
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Using an IVO registry URI to identify Views has two main advantages:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> IVO registry URIs are by their nature unique, which makes it easy to ensure that different teams do not accidentally use the same URI
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If the IVO registry URI points to a description registered in the IVO registry, this provides a mechanism to discover what the View contains
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.4.3"/><h4>
3.4.3  View descriptions</h4>
<a id="subsubsec:view descriptions">
</a>
If the URI for a particular View is resolvable, i.e. an IVO registry identifier or a HTTP URL, then it SHOULD point to an XML resource that describes the View.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A ViewDescription SHOULD describe the data format and/or content of the view.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A ViewDescription SHOULD have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: the formal URI of the View
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>DisplayName</em>: a simple display name of the View.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>Description</em>: a text block describing the data format and content of the View.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A ViewDescription MAY have the following optional members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>MimeType</em>: the standard MIME type of the View, if applicable
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>Parameters</em>: a list of required and option parameters the view accepts, if applicable
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
However, at the time of writing, the schema for registering ViewDescriptions in the IVO registry has not been finalized.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>UI Display name  </b>
If a client is unable to resolve a View identifier into a description, then it MAY just display the identifier as a text string:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Download as urn:table.meta.fits
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the client can resolve the View identifier into a description, then the client MAY use the information in the description to display a human readable name and description of the View:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Download table metadata as FITS header
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Mime Types  </b>
If a VOSpace service provides HTTP access to the data contained in a Node, then if the ViewDescription contains a MimeType field, this SHOULD be included in the appropriate header field of the HTTP response.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.4.4"/><h4>
3.4.4  Default views</h4>
<a id="subsubsec:default views">
</a>
The following standard URIs are registered under a StandardKeyEnumeration resource [VOStd] in the IVOA registry with the resource identifier ivo://ivoa.net/vospace/core. They SHALL be used to refer to the default import and export views:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> ivo://ivoa.net/vospace/core#anyview SHALL be used as the view URI to indicate that a service will accept any view for an import operation
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#binaryview SHALL be used as the view URI to import or export data as a binary file
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> ivo://ivoa.net/vospace/core#defaultview SHALL be used by a client to indicate that the service should choose the most appropriate view for a data export
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Default import view  </b>
If a client imports data using this view, the data SHALL be treated as a binary BLOB, and stored as is with no additional processing. This is equivalent to the application/binary MIME type.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note, this view is OPTIONAL, and the service may throw a ViewNotSupported exception if it does not accept this view. In particular, this view cannot be used to import data into a StructuredDataNode as the service needs to know about and understand the data format to be able to create the StructuredDataNode.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note, this view is only valid for the data import operations, pullToVoSpace and pushToVoSpace. If this view is requested in an export operation, pullFromVoSpace and pushToVoSpace, then the service SHOULD throw a ViewNotSupported exception.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Default export view  </b>
If a client requests data using this view, the server SHALL choose whichever of the available views (the server) thinks is the most appropriate, based on how the data is stored. In a simple file-based system, this will probably be the same format that the data was originally imported in. In a database table system, this will probably either be VOTable or CVS, depending on the level of metadata available.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note, this view is OPTIONAL, and the server may throw a ViewNotSupported exception if it does not provide this view. However, in most cases, it is expected that a service would be able to select an appropriate 'default' format for data held within the service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note, this view is only valid for the data export operations, pullFromVoSpace and pushFromVoSpace. If this view is requested in an import operation, pullToVoSpace and pushToVoSpace, then the service SHOULD throw a ViewNotSupported fault.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.4.5"/><h4>
3.4.5  Container views</h4>
<a id="subsubsec:container views">
</a>
In VOSpace 2.1, a view of a ContainerNode describes the data representation (format) of a file or data stream that represents the combined contents of the node and its children. If the view describes an archive format (tar, zip, etc.) then a service that accepts this view (format) for a ContainerNode SHALL provide access to the archive contents as children nodes of the container. Whether or not the service actually unpacks the archive is implementation dependent but the service SHALL behave as though it has done so. For example, a client may want to upload a tar file containing several images to a VOSpace service. If they associate it with (upload it to) a (Un)structuredDataNode then it will be treated as a blob and its contents will be not be available. However, if they upload it to a ContainerNode with an accepts view of "tar" then the image files within the tar file will be represented as children nodes of the ContainerNode and accessible like any other data object within the space.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If a service provides an archive format (tar, zip, etc.) view of a ContainerNode then the service SHALL package the contents of the container and all its child nodes in the specified format.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc3.5"/><h3>
3.5  Protocols</h3>
<a id="subsec:protocols">
</a>
A Protocol describes the parameters required to perform a data transfer using a particular protocol.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A Protocol representation SHALL have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: the Protocol identifier
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>endpoint</em>: the endpoint URL to use for the data transfer additional arguments required for the transfer
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A protocol representation MAY have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>param</em>: A list of name-value pairs that specify any additional arguments required to support the protocol
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>securityMethod</em>: The requested (and/or resulting) authentication type
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note: endpoint will only contain a value after the response from the service is received.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.5.1"/><h4>
3.5.1  Protocol identifiers</h4>
<a id="subsubsec:protocol identifiers">
</a>
Every new type of Protocol requires a unique URI to identify the Protocol and how to use it.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The rules for the Protocol identifiers are similar to the rules for namespace URIs in XML schema. The only restriction is that it SHALL be a valid (unique) URI

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> An XML schema namespace identifier can be just a simple URN, e.g. urn:my-namespace
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Within the IVOA, the convention for namespace identifiers is to use a HTTP URL pointing to the namespace schema, or a resource describing it
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The current VOSpace schema defines Protocol identifiers as anyURI. The only restriction is that it SHALL be a valid (unique) URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> A Protocol URI can be a simple URN, e.g. urn:my-protocol
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This may be sufficient for testing and development on a private system, but it is not scalable for use on a public service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
For a production system, any new Protocols SHOULD have unique URIs that can be resolved into to a description of the Protocol.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Ideally, these should be IVO registry URIs that point to a description registered in the IVO registry:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> 
<pre>ivo://my-registry/vospace/protocols#my-protocol
</pre>
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Using an IVO registry URI to identify Protocols has two main advantages:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> IVO registry URIs are by their nature unique, which makes it easy to ensure that different teams do not accidentally use the same URI
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If the IVO registry URI points to a description registered in the IVO registry, this provides a mechanism to discover how to use the Protocol
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.5.2"/><h4>
3.5.2  Protocol descriptions</h4>
<a id="subsubsec:protocol descriptions">
</a>
If the URI for a particular Protocol is resolvable, i.e. an IVO registry identifier or a HTTP URL, then it SHOULD point to an XML resource that describes the Protocol.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A ProtocolDescription SHOULD describe the underlying transport protocol, and how it should be used in this context.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A ProtocolDescription SHOULD have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: the formal URI of the Protocol
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>DisplayName</em>: A simple display name of the Protocol
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>Description</em>: Text block describing describing the underlying transport protocol, and how it should be used in this context
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
However, at the time of writing, the schema for registering ProtocolDescriptions in the IVO registry has not been finalized.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>UI display name  </b>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If a client is unable to resolve a Protocol identifier into a description, then it MAY just display the identifier as a text string:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Download using urn:my-protocol
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the client can resolve the Protocol identifier into a description, then the client MAY use the information in the description to display a human readable name and description of the Protocol:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> Download using standard HTTP GET
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.5.3"/><h4>
3.5.3  Standard protocols</h4>
<a id="subsubsec:standard protocols">
</a>
Protocol URIs and ProtocolDescriptions for the core set of standard transport protocols are registered under a StandardKeyEnumeration resource [VOStd] in the IVOA registry with the resource identifier ivo://ivoa.net/vospace/core. The following URIs SHALL be used to represent the standard protocols:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> 
<pre>ivo://ivoa.net/vospace/core#httpget
</pre> SHALL be used as the protocol URI for a HTTP GET transfer
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> 
<pre>ivo://ivoa.net/vospace/core#httpput
</pre> SHALL be used as the protocol URI for a HTTP PUT transfer
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> 
<pre>ivo://ivoa.net/vospace/core#httpsget
</pre> SHALL be used as the protocol URI for a HTTP GET transfer over a Secure Socket Layer (SSL)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> 
<pre>ivo://ivoa.net/vospace/core#httpsput
</pre> SHALL be used as the protocol URI for a HTTP PUT transfer over a Secure Socket Layer (SSL)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
However, this is not intended to be a closed list, different implementations are free to define and use their own transfer Protocols and authentication types.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.5.4"/><h4>
3.5.4  Custom protocols</h4>
<a id="subsubsec:custom protocols">
</a>
There are several use cases where a specific VOSpace implementation may want to define and use a custom VOSpace transfer Protocol, either extending an existing Protocol, or defining a new one.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>SRB Gateway  </b>
One example would be a VOSpace service that was integrated with a SRB (Storage Resource Broker) system. In order to enable the service to use the native SRB transport protocol to transfer data, the service providers would need to register a new ProtocolDescription to represent the SRB transport protocol.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The ProtocolDescription would refer to the technical specification for the SRB transport protocol, and define how it should be used to transfer data to and from the VOSpace service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Clients that do not understand the SRB transport protocol would not recognize the URI for the SRB Protocol, and would ignore Transfer options offered using this Protocol.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Clients that were able to understand the SRB transport protocol would recognize the URI for the SRB Protocol, and could use the 'srb://..' endpoint address in a Protocol option to transfer data using the SRB transport protocol.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Enabling different groups to define, register and use their own custom Protocols in this way means that support for new transport protocols can be added to VOSpace systems without requiring changes to the core VOSpace specification.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In this particular example, it is expected that one group within the IVOA will work with the SRB team at SDSC to define and register the Protocol URI and ProtocolDescription for using the SRB protocol to transfer data to and from VOSpace systems.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Other implementations that plan to use the SRB transport protocol in the same way could use the same Protocol URI and ProtocolDescription to describe data transfers using the SRB transport protocol.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The two implementations would then be able use the common Protocol URI to negotiate data transfers using the SRB transport protocol.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Local NFS transfers  </b>
Another example of a custom Protocol use case would to transfer data using the local NFS file system within an institute.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If an institute has one or more VOSpace services co-located with a number of data processing applications, all located within the same local network, then it would be inefficient to use HTTP GET and PUT to transfer the data between the services if they could all access the same local file system.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In this case, the local system administrators could register a custom ProtocolDescription which described how to transfer data using their local NFS file system.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> 
<pre>ivo://my.institute/vospace/protocols#internal-nfs
</pre>
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Data transfers using this Protocol would be done using file:// URLs pointing to locations within the local NFS file system:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> 
<pre>file:///net/host/path/file
</pre>
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
These URLs would only have meaning to services and applications located within the local network, and would not be usable from outside the network.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Services and applications located within the local network would be configured to recognize the custom Protocol URI, and to use local file system operations to move files within the NFS file system.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Services and applications located outside local network would not recognize the custom Protocol URI and so would not attempt to use the internal file URLs to transfer data.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note that in this example the custom Protocol URI and the associated ProtocolDescription refer to data transfers using file URLs within a specific local NFS file system.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If a different institute wanted to use a similar system to transfer data within their own local network, then they would have to register their own custom Protocol URI and associated ProtocolDescription.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The two different Protocol URIs and ProtocolDescriptions describe how to use the same underlying transport protocol (NFS) in different contexts.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Enabling different groups to define, register and use their own custom Protocols in this way means that systems can be configured to use the best available transport protocols for transferring data, without conflicting with other systems who may be using similar a transport protocol in a different context.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc3.6"/><h3>
3.6  Transfers</h3>
<a id="subsec:transfers">
</a>
A Transfer describes the details of a data transfer to or from a VOSpace.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.6.1"/><h4>
3.6.1  XML Document Transfers</h4>
<a id="subsubsec:xml document transfers">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Transfers can be represented as XML documents.  For example:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<pre>
&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/myspace/myfile&lt;/vos:target&gt;
  &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput" /&gt;
&lt;/vos:transfer&gt;

</pre>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Clients send transfer XML documents to a VOSpace synchronous or asynchronous UWS transfer endpoint.  The VOSpace service SHALL put, in the UWS Job results, a resulting transfer XML document.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A client initiated UWS Job representation of a Transfer SHALL have the following parameters:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>target</em>: denotes the VOSpace node to/from which data is to be transferred
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>direction</em>: denotes the direction of a data transfer
        
<ul><li> It can be a URI for internal data transfers (move and copy operations) or one of: pushToVoSpace, pullToVoSpace, pushFromVoSpace or pullFromVoSpace - for external data transfer.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>view</em>: denotes the requested View
        
<ul><li> For the transfer to be valid, the specified View must match one of those listed in the accepts or provides list of the Node.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> For an internal data transfer, this parameter is not required.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>protocol</em>: denotes the transfer protocol(s) to use
        
<ul><li> A transfer may contain more than one protocol with different Protocol URIs.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Each protocol may contain one or more security methods that can be applied to the protocol.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> For an internal data transfer, this parameter is not required.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>keepBytes</em>: denotes whether the source object is to be kept in an internal data transfer, i.e. distinguishes between a move and a copy
        
<ul><li> For an external data transfer, this parameter is not required.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>param</em>: A list of zero or more parameters that specify any additional arguments for the transfer.
        
<ul><li> Standard Property URIs should be used as the parameter key.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> e.g. Clients may tell the service the size of a file they intend to upload: &lt;vos:param uri=ïvo://ivoa.net/vospace/core#length»1024&lt;/vos:param&gt;
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This representation will be used as a child of the jobInfo element in a UWS Job representation.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service representation of the results of a Transfer SHALL have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>target</em>: denotes the VOSpace node to/from which data is to be transferred
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>direction</em>: denotes the direction of a data transfer
        
<ul><li> It can be a URI for internal data transfers (move and copy operations) or one of: pushToVoSpace, pullToVoSpace, pushFromVoSpace or pullFromVoSpace - for an external data transfer.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>view</em>: A View specifying the requested View
        
<ul><li> For the transfer to be valid, the specified View must match one of those listed in the accepts or provides list of the Node.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> For an internal data transfer, this parameter is not required.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>protocol</em>: denotes the transfer protocol(s) to use
        
<ul><li> A transfer may contain more than one protocol with different Protocol URIs.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> A Transfer may contain more than one Protocol element with the same Protocol URI with different endpoints
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Each protocol on the result must contain an endpoint.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Each protocol may contain one or more security methods that can be applied to the protocol.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> For an internal data transfer, this parameter is not required.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>param</em>: parameters related to the transfer
        
<ul><li> A transfer may contain zero or more transfer parameters.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.6.2"/><h4>
3.6.2  URL Parameter Transfers</h4>
<a id="subsubsec:url parameter transfers">
</a>
A simplified and restricted method of transfer negotiation makes use of URL query string parameters rather than XML documents.  Parameter based transfer negotiation support is optional and is limited to the UWS synchronous transfer endpoint.  An example URL for a parameter transfer negotiation:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<pre>
http://server.example.com/vospace/synctrans?
    TARGET=vos://example.com~vospace/mydata1&amp;
    DIRECTION=pullFromVoSpace&amp;
    PROTOCOL=ivo://ivoa.net/vospace/core#httpget

</pre>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The following parameters MUST be supplied by the client requesting a transfer:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>TARGET</em>: denotes the VOSpace node to/from which data is to be transferred
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>DIRECTION</em>: denotes the direction of a data transfer
        
<ul><li> With parameter based negotiation, only pushToVoSpace and pullFromVoSpace are allowed as values for DIRECTION.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>PROTOCOL</em>: denotes the transfer protocol(s) to use. 
        
<ul><li> With parameter based negotiation, clients MUST provide exactly one PROTOCOL parameter.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The following parameters MAY be supplied by the client requesting a transfer:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>VIEW</em>: The standard URI of the view to use.  If no view is provided the service SHALL use the default view.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>SECURITYMETHOD</em>: The standard URI of the security method that can be used for the supplied PROTOCOL.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>REQUEST=redirect</em>: If the supplied, the service SHALL respond with an HTTP redirect to an endpoint for the PROTOCOL.
    
<ul><li> This parameter is only applicable when the value of the DIRECTION parameter is <em>pullFromVoSpace</em>.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Since the parameter values are in the request URL they must be URL-encoded.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Upon receipt of a parameter based transfer negotiation request to the synchronous transfer endpoint, the service SHALL reply with a XML representation of the transfer results in the response body.  The only exception to this is when the DIRECTION is <em>pullFromVoSpace</em> and the REDIRECT parameter is provided and set to <em>true</em>, in which case the service SHALL respond with a redirect to the endpoint of the supplied PROTOCOL.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.6.3"/><h4>
3.6.3  Service-initiated transfers</h4>
<a id="subsubsec:service-initiated transfers">
</a>
Two of the external data transfers (pullToVoSpace and pushFromVoSpace) rely on the server performing the data transfer itself.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The client constructs a Job request containing details of the View and one or more Protocol elements with valid endpoint addresses.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service MAY ignore Protocols with URIs that it does not recognize.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the server is unable to handle any of the requested Protocols in a Transfer request, then it SHALL respond with a fault.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The order of the Protocols in the request indicates the order of preference that the client would like the server to use. However, this is only a suggestion, and the server is free to use its own preferences to select which Protocol it uses first.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service selects the first Protocol it wants to use from the list and attempts to transfer the data using the Protocol endpoint.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the first attempt fails, the server may choose another Protocol from the list and re-try the transfer using that Protocol endpoint. The status flag will be updated to reflect this.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The server may attempt to transfer the data using any or all of the Protocols in the list until either, the data transfer succeeds, or there are no more Protocol options left.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The server SHALL be allowed to only use each Protocol option once. This allows a data source to issue one time URLs for a Transfer, and cancel each URL once it has been used.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Once one of the Protocol options succeeds the transfer SHALL be considered to have completed - the status flag needs to be updated to reflect this -, and the server is not allowed to use any of the remaining Protocol options. This allows a data source to issue a set of one time URLs for a transfer, and to cancel any unused URLs once the transfer has been completed.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Some Protocols MAY require the service to call a callback address when a data transfer completes. This behavior is specific to the Protocol, and SHOULD be defined in the ProtocolDescription.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If none of the Protocol options succeed, then the transfer SHALL be considered to have failed, and the service SHALL return a fault containing details of the Protocol options it tried. The status flag will be updated to reflect this.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc3.6.4"/><h4>
3.6.4  Client-initiated transfers</h4>
<a id="subsubsec:client-initiated transfers">
</a>
Two of the VOSpace external transfer methods (pushToVoSpace and pullFromVoSpace) rely on an external actor performing the data transfer outside the scope of the service call.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In these methods, the client sends a Job request to the server which SHOULD contain details of the View and one or more protocol parameters.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In effect, the client is sending a list of Protocols that it (the client) wants to use for the transfer.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service MAY ignore Protocols with URIs that it does not recognize.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service selects the Protocols from the request that it is capable of handling, and builds a Transfer results response containing the selected Protocol elements filling in valid endpoint addresses for each of them.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If available, the service may choose to consult the securityMethod in the Protocols to construct correct endpoints.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The order of the Protocol elements in the request indicates the order of preference that the client would like to use. However, this is only a suggestion, and the server is free to use its own preferences when generating the list of Protocols in the response.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
In effect, the server is responding with the subset of the requested Protocols that it (the server) is prepared to offer.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the server is unable to accept any of the requested Protocols, then it SHALL respond with a fault.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
On receipt of the response, the client can use the list of Protocols itself, or pass them on to another agent to perform the data transfer on its behalf.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The agent MAY ignore Protocols URIs that it does not recognize.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The agent selects the first Protocol it wants to use from the list and attempts to transfer the data using the Protocol endpoint. The status flag will be updated to reflect this.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the first attempt fails, the agent MAY choose another Protocol from the list and re-try the transfer using that Protocol endpoint.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The agent MAY attempt to transfer the data using any or all of the Protocols in the list until either, the data transfer succeeds, or there are no more Protocol options left.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The agent SHALL be allowed to only use each Protocol option once. This allows a data source to issue one time URLs for a Transfer, and cancel each URL once it has been used.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Once one of the Protocol options succeeds the transfer SHALL be considered to have completed and the status flag will be updated correspondingly. The agent is not allowed to use any of the remaining unused Protocol options. This allows a data source to issue a set of one time URLs for a transfer, and to cancel any unused URLs once the transfer has been completed.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Some Protocols MAY require the agent to call a callback address when a data transfer completes. This behavior is specific to the Protocol, and SHOULD be defined in the ProtocolDescription.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If none of the Protocol options succeed, then the transfer SHALL be considered to have failed and the status will be updated.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc3.7"/><h3>
3.7  Searches</h3>
<a id="subsec:searches">
</a>
A Search describes the details of data objects in the space which meet specified search criteria, i.e. that are the results of a submitted search request.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A UWS Job representation of a Search SHALL have the following parameters:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>uri</em>: An OPTIONAL identifier indicating from which item to continue a search
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>limit</em>: An OPTIONAL limit indicating the maximum number of results in the response
        
<ul><li> No limit indicates a request for an unpaged list. However the server MAY still impose its own limit on the size of an individual response, splitting the results into more than one page if required
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>detail</em>: The level of detail in the results
        
<ul><li> min: The list contains the minimum detail for each Node with all optional parts removed - the node type should be returned
                
<ul><li> e.g. <em>&lt;node uri="vos://service/name" xs:type="Node"/&gt;</em>
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> max : The list contains the maximum detail for each Node, including any xs:type specific extensions
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> properties : The list contains a basic node element with a list of properties for each Node with no xs:type specific extensions.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>matches</em>: An OPTIONAL search string consisting of properties and values to match against and joined in conjunction (and) or disjunction (or).
        
<ul><li> Each property-value pair consists of the uri identifying a particular property and a regular expression against which the property values are to be matched: `uri' = `regex'
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The match pairs can be combined in conjunction and/or disjunction using 'and' and 'or' respectively. For example: (property1 = `value1' and property2 = `value2') or property3 = `value3'.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The regex syntax SHALL comply with POSIX conventions.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>node</em>: An OPTIONAL URI(s) identifying the starting node for a search, i.e., the matches constraints are applied to this node and its children
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This representation will be used as a child of the jobInfo element in a UWS Job representation. For example:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<pre>
&lt;uws:jobInfo&gt;
  &lt;vos:search&gt;
    &lt;vos:detail&gt;properties&lt;/vos:detail&gt;
    &lt;vos:matches&gt;
        ivo://ivoa.net/vospace/core#description="galax"
    &lt;/vos:matches&gt;
  &lt;vos:search&gt;
&lt;uws:jobInfo&gt;

</pre>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The representation of the results of a Search SHALL have the following members:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>nodes</em>: A list containing zero or more Nodes of appropriate detail identifying the target URIs meeting the search criteria
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc3.8"/><h3>
3.8  REST bindings</h3>
<a id="subsec:rest bindings">
</a>
In a REST (Representational State Transfer) binding of VOSpace, each of the objects defined below is available as a web resource with its own URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table class="tabular"><tr><td align="left">/properties </td><td width="158">the properties employed in the space </td></tr><tr><td align="left">/views </td><td width="158">the views employed in the space </td></tr><tr><td align="left">/protocols </td><td width="158">the protocols employed in the space </td></tr><tr><td align="left">/searches </td><td width="158">the searches of the space </td></tr><tr><td align="left">/nodes/(node-path) </td><td width="158">a Node under the nodes of the space </td></tr><tr><td align="left">/transfers </td><td width="158">asynchronous transfers for the space </td></tr><tr><td align="left">/synctrans </td><td width="158">synchronous transfers for the space </td></tr><tr><td align="left">/transfers/(job-id)/results/transferDetails </td><td width="158">the resulting transfer details </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
These names are part of the VOSpace 2.1 standard.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The following Nodes, appearing as part of a node-path, are reserved:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> .auto indicates that the service should auto-generate an endpoint URI to replace this placeholder (Note: that this is an OPTIONAL feature of a service)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> .null indicates an endpoint that discards all data written to it and provides no data when read from, i.e. a bit bucket
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The standardID for the service is: ivo://ivoa.net/std/VOSpace/v2.1. Available resources will then just be ivo://ivoa.net/std/VOSpace/v2.1#&lt;resourceName&gt;, e.g., ivo://ivoa.net/std/VOSpace/v2.1#nodes.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc4"/><h2>
4  Access Control</h2>
<a id="sec:access control">
</a>
VOSpace implementations may support a number of authentication methods including:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> no authentication (anonymous clients)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> digital signatures with X.509 client certificates
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> OAuth (http://oauth.net)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
For a full list of authentication methods and the associated standardIDs please refer to the document: <a href="http://www.ivoa.net/documents/latest/SSOAuthMech.html">IVOA Single-Sign-On Profile: Authentication Mechanisms</a>. 	

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
When a client is requesting a transfer from the service, the authentication type (securityMethod) may be supplied along side the list of transfer protocols. The <em>securityMethod</em> is specified by standardID.  If the service supports the requested type, it may base the construction of the endpoint URL for data transfer from this information.  (Services may encounter situations when the URL for data transfer will depend on the authentication type the client wished to use.)

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
For backwards compatibility support, services SHALL include the securityMethod element in the transfer response if and only if a securityMethod was provided by the client in the protocol.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The access control policy for a VOSpace is defined by the implementor of that space according to the use cases for which the implementation is intended.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A human-readable description of the implemented access policy must be declared in the registry metadata for the space.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
These are the most probable access policies:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> No authorization is required, but clients must authenticate an identity (for logging purposes) in each request to the space
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Clients may not create or change nodes (i.e. the contents of the space are fixed by the implementation or set by some interface other than VOSpace), but any client can read any node without authentication
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Nodes are considered to be owned by the user who created them. Only the owner can operate on a node
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Node authorization is similar to that of Linux file system permission handling.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
No operations to modify the access policy (e.g. to set permissions on an individual node) are included in this standard. Later versions may add such operations.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Where the access policy requires authentication of callers, the VOSpace service SHALL support one of the authentication methods defined in the IVOA Single Sign On Profile.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc5"/><h2>
5  Web service operations</h2>
<a id="sec:web service operations">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A VOSpace 2.1 service SHALL be a RESTful service with the operations listed in this section.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Notes  </b>

<ul><li> The URL http://(rest-endpoint)/nodes denotes the URL of the top node in the VOSpace. The URL http://(rest-endpoint)/nodes/(path) denotes a specific node within the VOSpace.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> When representing a Fault, the exact specified fault name SHALL be used. If this is followed by some details, the fault SHALL be separated from the subsequent characters by whitespace.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If the service is able to detect an internal system failure (associated with an HTTP 500 status code) then it should indicate this as described below if possible.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> When clients POST or PUT XML documents (such as transfer documents), the Content-Type should be set to either <em>text/xml</em> or <em>application/x-www-form-urlencoded</em>
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc5.1"/><h3>
5.1  Service metadata</h3>
<a id="subsec:service metadata">
</a>
These operations return comprehensive lists of service-level metadata, e.g. all protocols supported by the service. Individual nodes within a service, however, may not necessarily support all of these, i.e. only container nodes may support archive formats such as zip or tar.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.1.1"/><h4>
5.1.1  getProtocols</h4>
<a id="subsubsec:getprotocols">
</a>
Get a list of the transfer Protocols supported by the VOSpace service

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP request to http://rest-endpoint/protocols

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
<br/>   <b>Status code  </b> A HTTP 200 status code
<br/>   <b>Body  </b>
A Protocols representation giving:

<ul><li> accepts: A list of Protocols that the service SHALL accept
    
<ul><li> In this context `accepting a protocol' means that the service SHALL act as a client for the protocol
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> e.g. `accepting httpget' means the service can read data from an external HTTP web server
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> provides: A list of Protocols that the service SHALL provide
    
<ul><li> In this context `providing a protocol' means that the service SHALL act as a server for the protocol
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> e.g. `providing httpget' means the service can act as a http web server
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>

<ul><li> The service SHOULD throw a HTTP 500 status code including an InternalFault fault in the entity body if the operation fails
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
Get the VOSpace protocols
<br/>

Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/protocols
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/protocols HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Fri, 22 May 2015 21:22:30 GMT
&lt; Content-Type: text/xml
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;vos:protocols xmlns="http://www.ivoa.net/xml/VOSpace/v2.1" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;vos:accepts&gt;
    &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"/&gt;
    &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"/&gt;
  &lt;/vos:accepts&gt;
  &lt;vos:provides&gt;
    &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"/&gt;
    &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"/&gt;
  &lt;/vos:provides&gt;
&lt;/vos:protocols&gt;
* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.1.2"/><h4>
5.1.2  getViews</h4>
<a id="subsubsec:getviews">
</a>
Get a list of the Views and data formats supported by the VOSpace service

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP GET to http://rest-endpoint/views

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
<br/>   <b>Status code  </b> A HTTP 200 status code
<br/>   <b>Body  </b>
A Views representation giving:

<ul><li> accepts: A list of Views that the service SHALL accept
    
<ul><li> In this context `accepting a view' means that the service SHALL receive input data in this format
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> A simple file based system may use the reserved View URI ivo://net.ivoa.vospace/views/any to indicate that it can accept data in any format
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> provides: A list of Views that the service SHALL provide
    
<ul><li> In this context `providing a view' means that the service SHALL produce output data in this format
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> A simple file based system may use the reserved View URI ivo://net.ivoa.vospace/views/any to indicate that it can provide data in any format
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>

<ul><li> The service SHOULD throw a HTTP 500 status code including an InternalFault fault in the entity body if the operation fails
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
Get the VOSpace views
<br/>

Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v "http://server.example.com/vospace/views"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/views HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Fri, 22 May 2015 21:29:50 GMT
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;vos:views xmlns="http://www.ivoa.net/xml/VOSpace/v2.1" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;vos:accepts&gt;
    &lt;vos:view uri="ivo://ivoa.net/vospace/core#anyview"/&gt;
  &lt;/vos:accepts&gt;
  &lt;vos:provides&gt;
    &lt;vos:view uri="ivo://ivoa.net/vospace/core#defaultview"/&gt;
  &lt;/vos:provides&gt;
&lt;/vos:views&gt;
* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.1.3"/><h4>
5.1.3  getProperties</h4>
<a id="subsubsec:getproperties">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP request to http://rest-endpoint/properties

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
<br/>   <b>Status code  </b> A HTTP 200 status code
<br/>   <b>Body  </b>
A Properties representation including:

<ul><li> accepts: A list of identifiers for the Properties that the service SHALL accept and understand. This refers to metadata (Properties) that is implementation dependent but can be used by a client to control operational aspects of the service: for example, a VOSpace implementation might allow individual users to control the permissions on data objects via a Property called "permissions". If the VOSpace receives a data object with this Property then it `understands' what this property refers to and can deal with it accordingly.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> provides: A list of identifiers for the Properties that the service SHALL provide
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> contains: A list of identifiers for all the Properties currently used by Nodes within the service
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>

<ul><li> The service SHOULD throw a HTTP 500 status code including an InternalFault fault in the entity body if the operation fails
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
Get the VOSpace properties
<br/>

Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v "http://server.example.com/vospace/properties"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/properties HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Fri, 22 May 2015 21:29:50 GMT
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;vos:properties xmlns="http://www.ivoa.net/xml/VOSpace/v2.1" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;vos:accepts&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#title"/&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#creator"/&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#description"/&gt;
  &lt;/vos:accepts&gt;
  &lt;vos:provides&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#availableSpace"/&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#httpput"/&gt;
  &lt;/vos:provides&gt;
  &lt;vos:contains&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#availableSpace"/&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#title"/&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#creator"/&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#description"/&gt;
  &lt;/vos:contains&gt;
&lt;/vos:properties&gt;
* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc5.2"/><h3>
5.2  Creating and manipulating data nodes</h3>
<a id="subsec:creating and manipulating data nodes">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.2.1"/><h4>
5.2.1  createNode</h4>
<a id="subsubsec:createnode">
</a>
Create a new node at a specified location

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP PUT of a node representation to path of the node to be created on the /nodes resource:

<pre>
http://server.example.com/vospace/nodes/&lt;path to node&gt;

</pre>
The node representation is template Node (as defined in section <a href="#subsec:nodes and node types">3.1</a>) for the node to be created.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A valid uri attribute SHALL be required. The name .auto is a reserved URI to indicate an auto-generated URI for the destination, i.e. given the following URI vos://service/path/.auto a service SHOULD create a new unique URI for the node within vos://service/path.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the node path of the uri in the node representation does not match the node path in the HTTP PUT URL the service SHALL return an error.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If the Node xs:type is not specified then a generic node of type Node is implied.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The permitted values of xs:type are:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> vos:Node
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> vos:DataNode
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> vos:UnstructuredDataNode
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> vos:StructuredDataNode
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> vos:ContainerNode
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> vos:LinkNode
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
When creating a new Node the service MAY substitute a valid subtype, i.e. If xs:type is set to vos:DataNode then this may be implemented as a DataNode, StructuredDataNode or an UnstructuredDataNode.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The properties of the new Node can be set by adding Properties to the template. Attempting to set a Property that the service considers to be 'readOnly' SHALL cause a PermissionDenied fault. The accepts and provides lists of Views for the Node cannot be set using this method.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The capabilities list for the Node cannot be set using this method.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
<br/>   <b>Status code  </b> A HTTP 201 status code
<br/>   <b>Body  </b>
A node representation including:

<ul><li> <em>node</em>: details of the new Node
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The <em>accepts</em> list of Views for the Node SHALL be filled in by the service based on service capabilities.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The <em>provides</em> list of Views for the Node MAY not be filled in until some data has been imported into the Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The <em>capabilities</em> list for the Node MAY not be filled in until some data has been imported into the Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>

<ul><li> The service SHOULD throw a HTTP 500 status code including an InternalFault fault in the entity body if the operation fails
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 409 status code including a DuplicateNode fault in the entity body if a Node already exists with the same URI
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 400 status code including an InvalidURI fault in the entity body if the requested URI is invalid
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If the URI node path does not match the node path of the HTTP PUT request the service must throw a HTTP 400 status including an InvalidURI fault in the entity body.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 400 status code including a TypeNotSupported fault in the entity body if the type specified in xs:type is not supported
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 403 status code including PermissionDenied fault in the entity body if the user does not have permissions to perform the operation
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If a parent node in the URI path does not exist then the service SHALL throw a HTTP 404 status code including a ContainerNotFound fault in the entity body.
    
<ul><li> For example, given the URI path /a/b/c, the service must throw a HTTP 404 status code including a ContainerNotFound fault in the entity body if either /a or /a/b do not exist.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If a parent node in the URI path is a LinkNode, the service SHALL throw a HTTP 400 status code including a LinkFound fault in the entity body.
        
<ul><li> For example, given the URI path /a/b/c, the service must throw a HTTP 400 status code including a LinkFound fault in the entity body if either /a or /a/b are LinkNodes.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
Create a node
<br/>

The node to be created (newNode.xml):
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:node xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.ivoa.net/xml/VOSpace/v2.1" xs:type="vos:UnstructuredDataNode" uri="vos://example.com!vospace/mydata1"&gt;
  &lt;vos:properties&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#description"&gt;My important results&lt;/vos:property&gt;
  &lt;/vos:properties&gt;
  &lt;vos:accepts/&gt;
  &lt;vos:provides/&gt;
  &lt;vos:capabilities/&gt;
&lt;/vos:node&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X PUT -d @newNode.xml -H "Content-type: text/xml" "http://server.example.com/vospace/nodes/mydata1"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; PUT /vospace/nodes/mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 364
&gt; Content-Type: text/xml
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Fri, 22 May 2015 23:06:32 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Content-Length: 589
&lt; Connection: close
&lt;
&lt;vos:node xmlns:xi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="http://www.ivoa.net/xml/VOSpace/v2.1"
      xs:type="vos:UnstructuredDataNode" 
      uri="vos://example.com!vospace/mydata1"&gt;
  &lt;vos:properties&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#description"&gt;My important results&lt;/vos:property&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#date" readOnly="true"&gt;2015-05-22T23:06:32.966&lt;/vos:property&gt;
  &lt;/vos:properties&gt;
  &lt;vos:accepts&gt;
    &lt;vos:view uri="ivo://ivoa.net/vospace/core#anyview"/&gt;
  &lt;/vos:accepts&gt;
  &lt;vos:provides/&gt;
  &lt;vos:capabilities/&gt;
&lt;/vos:node&gt;
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.2.2"/><h4>
5.2.2  moveNode</h4>
<a id="subsubsec:movenode">
</a>
Move a node within a VOSpace service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Note that this does not cover moving data between two separate VOSpace services.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Moving nodes between separate VOSpace services SHOULD be handled by the client, using the import, export and delete methods.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
When the source is a ContainerNode, all its children (the contents of the container) SHALL also be moved to the new destination.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
When the destination is an existing ContainerNode, the source SHALL be placed under it (i.e. within the container).

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The Node type cannot be changed using this method.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>

<ul><li> A HTTP POST of a Job representation for the transfer (see section 3.6) to http://rest-endpoint/transfers.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
.auto is a reserved URI to indicate an autogenerated URI for the destination, i.e. vos://service/path/.auto SHOULD cause a new unique URI for the node within vos://service/path to be generated.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
<br/>   <b>Status code  </b> The initial response is a HTTP 303 status code with the Location header keyword assigned to the created job.
<br/>   <b>Body  </b>
If an autogenerated URI for the destination was specified in the request then its value SHALL be specified as a result in the Results List for the completed transfer with the id of "destination":
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;uws:job&gt;
  ...
  &lt;uws:jobInfo&gt;
    &lt;vos:direction&gt;vos://example.com!vospace/mjg/.auto&lt;/vos:direction&gt;
  ...
  &lt;uws:results&gt;
    &lt;uws:result id="destination"&gt;vos://example.com!vospace/mjg/abc123&lt;/uws:result&gt;
  &lt;/uws:results&gt;
  ...
&lt;/uws:job&gt;
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
For all faults, the service shall set the PHASE to "ERROR" in the Job representation. The &lt;errorSummary&gt; element in the Job representation shall be set to the appropriate value for the fault type and the appropriate fault representation (see section 5.5) provided at the error URI: http://rest-endpoint/transfers/(jobid)/error.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table class="tabular"><tr><td width="197"><b>Fault description</b> </td><td align="left"><b>errorSummary</b> </td><td width="158"><b>Fault representation</b> </td></tr><tr><td width="197">Operation fails </td><td align="left">Internal Fault </td><td width="158">InternalFault </td></tr><tr><td width="197">User does not have permissions to perform the operation </td><td align="left">Permission Denied </td><td width="158">PermissionDenied </td></tr><tr><td width="197">Source node does not exist </td><td align="left">Node Not Found </td><td width="158">NodeNotFound </td></tr><tr><td width="197">Destination node already exists and it is not a ContainerNode </td><td align="left">Duplicate Node </td><td width="158">DuplicateNode </td></tr><tr><td width="197">A specified URI is invalid </td><td align="left">Invalid URI </td><td width="158">InvalidURI </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
Move a node
<br/>

The Job to be submitted (moveJob.xml):
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1" &gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;vos://example.com!vospace/mydata2&lt;/vos:direction&gt;
  &lt;vos:keepBytes&gt;false&lt;/vos:keepBytes&gt;
&lt;/vos:transfer&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @moveJob.xml -H "Content-type: text/xml" "http://server.example.com/vospace/transfers"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; POST /vospace/transfers HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 261
&gt; Content-Type: text/xml
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Fri, 22 May 2015 23:44:04 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/glmldqf591feljub
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
Job information can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v "http://server.example.com/vospace/transfers/glmldqf591feljub"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/transfers/glmldqf591feljub HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Fri, 22 May 2015 23:47:26 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;uws:job xmlns:uws="http://www.ivoa.net/xml/UWS/v1.0" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;uws:jobId&gt;glmldqf591feljub&lt;/uws:jobId&gt;
  &lt;uws:ownerId xs:nill="true" /&gt;
  &lt;uws:phase&gt;PENDING&lt;/uws:phase&gt;
  &lt;uws:quote&gt;2015-05-23T11:44:03.993&lt;/uws:quote&gt;
  &lt;uws:startTime xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:endTime xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:executionDuration&gt;43200&lt;/uws:executionDuration&gt;
  &lt;uws:destruction&gt;2015-05-29T23:44:03.993&lt;/uws:destruction&gt;
  &lt;uws:parameters /&gt;
  &lt;uws:results /&gt;
  &lt;uws:jobInfo&gt;
    &lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
      &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
      &lt;vos:direction&gt;vos://example.com!vospace/mydata2&lt;/vos:direction&gt;
      &lt;vos:keepBytes&gt;false&lt;/vos:keepBytes&gt;
    &lt;/vos:transfer&gt;
  &lt;/uws:jobInfo&gt;
&lt;/uws:job&gt;
</pre></div>
Now start the UWS job:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -d "PHASE=RUN" "http://server.example.com/vospace/transfers/glmldqf591feljub/phase"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; POST /vospace/transfers/glmldqf591feljub/phase HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 9
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Sun, 24 May 2015 16:51:37 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/glmldqf591feljub
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
Follow the redirect to see the phase.  The job will be either RUNNING, COMPLETED or ERROR.
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/transfers/glmldqf591feljub/phase
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/transfers/glmldqf591feljub/phase HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Sun, 24 May 2015 16:51:45 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 5
&lt; Connection: close
&lt;
* Closing connection #0
COMPLETED
</pre></div>
If the job is in phase RUNNING, the phase can be polled intermittently until it is COMPLETED or ERROR.
Error and result details can be seen by performing an HTTP GET to the job URL:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v "http://server.example.com/vospace/transfers/glmldqf591feljub"
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.2.3"/><h4>
5.2.3  copyNode</h4>
<a id="subsubsec:copynode">
</a>
Copy a node with a VOSpace service.
Note that this does not cover copying data between two separate VOSpace services.
Copying nodes between separate VOSpace services SHOULD be handled by the client, using the import and export methods.
When the source is a ContainerNode, all its children (the full contents of the container) SHALL get copied, i.e. this is a deep recursive copy.
When the destination is an existing ContainerNode, the copy SHALL be placed under it (i.e. within the container).
The Node type cannot be changed using this method.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP POST of a Job representation for the transfer (see section <a href="#subsec:transfers">3.6</a>) to http://rest-endpoint/transfers.
.auto is the reserved URI to indicate an auto-generated URI for the destination, i.e. vos://service/path/.auto SHOULD cause a new unique URI for the node within vos://service/path to be generated.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
The initial response is a HTTP 303 status code with the Location header keyword assigned to the created job.
If an autogenerated URI for the destination was specified in the request then its value SHALL be specified as a result in the Results List for the completed transfer with the id of "destination":

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;uws:job&gt;
  ...
  &lt;uws:jobInfo&gt;
    &lt;vos:direction&gt;vos://nvo.caltech!vospace/mjg/.auto&lt;/vos:direction&gt;
  ...
  &lt;uws:results&gt;
    &lt;uws:result id="destination"&gt;vos://nvo.caltech!vospace/mjg/abc123&lt;/uws:result&gt;
  &lt;/uws:results&gt;
  ...
&lt;/uws:job&gt;
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>
For all faults, the service shall set the PHASE to ËRROR" in the Job representation. The &lt;errorSummary&gt; element in the Job representation shall be set to the appropriate value for the fault type and the appropriate fault representation (see section <a href="#subsec:fault arguments">5.5</a>) provided at the error URI: http://rest-endpoint/transfers/(jobid)/error.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table class="tabular"><tr><td width="197"><b>Fault description</b> </td><td align="left"><b>errorSummary</b> </td><td width="158"><b>Fault representation</b> </td></tr><tr><td width="197">Operation fails </td><td align="left">Internal Fault </td><td width="158">InternalFault </td></tr><tr><td width="197">User does not have permissions to perform the operation </td><td align="left">Permission Denied </td><td width="158">PermissionDenied </td></tr><tr><td width="197">Source node does not exist </td><td align="left">Node Not Found </td><td width="158">NodeNotFound </td></tr><tr><td width="197">Destination node already exists and it is not a ContainerNode </td><td align="left">Duplicate Node </td><td width="158">DuplicateNode </td></tr><tr><td width="197">A specified URI is invalid </td><td align="left">Invalid URI </td><td width="158">InvalidURI </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
Copy a VOSpace node
<br/>

The Job to be submitted (copyJob.xml):
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1" &gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;vos://example.com!vospace/mydir/.auto&lt;/vos:direction&gt;
  &lt;vos:keepBytes&gt;true&lt;/vos:keepBytes&gt;
&lt;/vos:transfer&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @copyJob.xml -H "Content-type: text/xml" "http://server.example.come/vospace/transfers"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; POST /vospace/transfers HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 261
&gt; Content-Type: text/xml
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Fri, 22 May 2015 23:44:04 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/usil5s8mdbgjwzvq
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
Job information can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v "http://server.example.com/vospace/transfers/usil5s8mdbgjwzvq"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/transfers/usil5s8mdbgjwzvq HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Fri, 22 May 2015 23:47:26 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;uws:job xmlns:uws="http://www.ivoa.net/xml/UWS/v1.0" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;uws:jobId&gt;usil5s8mdbgjwzvq&lt;/uws:jobId&gt;
  &lt;uws:ownerId xs:nill="true" /&gt;
  &lt;uws:phase&gt;PENDING&lt;/uws:phase&gt;
  &lt;uws:quote&gt;2015-05-23T11:44:03.993&lt;/uws:quote&gt;
  &lt;uws:startTime xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:endTime xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:executionDuration&gt;43200&lt;/uws:executionDuration&gt;
  &lt;uws:destruction&gt;2015-05-29T23:44:03.993&lt;/uws:destruction&gt;
  &lt;uws:parameters /&gt;
  &lt;uws:results&gt;
    &lt;uws:result id="destination" xlink:href="vos://example.com!vospace/mydir/ef9ce281f5bd4bff92c8991580cddff4"/&gt;
  &lt;/uws:results&gt;
  &lt;uws:jobInfo&gt;
    &lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
      &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
      &lt;vos:direction&gt;vos://example.com!vospace/mydir/.auto&lt;/vos:direction&gt;
      &lt;vos:keepBytes&gt;true&lt;/vos:keepBytes&gt;
    &lt;/vos:transfer&gt;
  &lt;/uws:jobInfo&gt;
&lt;/uws:job&gt;
</pre></div>
Now start the UWS job:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -d "PHASE=RUN" "http://server.example.com/vospace/transfers/usil5s8mdbgjwzvq/phase"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; POST /vospace/transfers/usil5s8mdbgjwzvq/phase HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 9
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Sun, 24 May 2015 16:51:37 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/usil5s8mdbgjwzvq
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
Follow the redirect to see the phase.  The job will be either RUNNING, COMPLETED or ERROR.
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/transfers/usil5s8mdbgjwzvq/phase
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/transfers/usil5s8mdbgjwzvq/phase HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Sun, 24 May 2015 16:51:45 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 5
&lt; Connection: close
&lt;
* Closing connection #0
COMPLETED
</pre></div>
If the job is in phase RUNNING, the phase can be polled intermittently until it is COMPLETED or ERROR.
Error and result details can be seen by performing an HTTP GET to the job URL:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v "http://server.example.com/vospace/transfers/usil5s8mdbgjwzvq"
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.2.4"/><h4>
5.2.4  deleteNode</h4>
<a id="subsubsec:deletenode">
</a>
Delete a node.
When the target is a ContainerNode, all its children (the contents of the container) SHALL also be deleted.
Note that the same operation can also be achieved with a moveNode (see <a href="#subsubsec:movenode">5.2.2</a>) with a .null node as the direction (destination node).

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP DELETE to the URL of an existing node

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
A HTTP 204 status code

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>

<ul><li> The service SHOULD throw a HTTP 500 status code including an InternalFault fault in the entity-body if the operation fails
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 403 status code including a PermissionDenied fault in the entity-body if the user does not have permissions to perform the operation
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 404 status code including a NodeNotFound fault in the entity-body if the target node does not exist
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If a parent node in the URI path does not exist then the service SHALL throw a HTTP 404 status code including a ContainerNotFound fault in the entity-body
    
<ul><li> For example, given the URI path /a/b/c, the service must throw a HTTP 404 status code including a ContainerNotFound fault in the entity-body if either /a or /a/b do not exist.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If a parent node in the URI path is a LinkNode, the service SHALL throw a HTTP 400 status code including a LinkFound fault in the entity-body.
    
<ul><li> For example, given the URI path /a/b/c, the service must throw a HTTP 400 status code including a LinkFound fault in the entity-body if either /a or /a/b are LinkNodes.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If the target node in the URI path does not exist, the service SHALL throw a HTTP 404 status code including a NodeNotFound fault in the entity-body.
    
<ul><li> For example, given the URI path /a/b/c, the service must throw a HTTP 404 status code including a NodeNotFound fault in the entity-body if /a/b/c does not exist.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
Delete a VOSpace node
<br/>

Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X DELETE "http://server.example.com/vospace/nodes/mydata1"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to example.server.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to example.server.com (192.168.0.0) port 80 (#0)
&gt; DELETE /vospace/nodes/mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Sun, 24 May 2015 22:10:57 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc5.3"/><h3>
5.3  Accessing metadata</h3>
<a id="subsec:accessing metadata">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.3.1"/><h4>
5.3.1  getNode</h4>
<a id="subsubsec:getnode">
</a>
Get the details for a specific Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP GET to the URL of an existing node http://rest-endpoint/nodes/path
This can take the optional parameters to control the size of the response:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> <em>detail</em> with values of:
    
<ul><li> <em>min</em>: the returned record for the node contains minimum detail with all optional parts removed - the node type should be returned
        
<ul><li> e.g. &lt;Node uri="vos://service/name" xs:type="Node"/&gt;
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>max</em>: the returned record for the node contains the maximum detail, including any xs:type specific extensions
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>properties</em>: the returned record for the node contains the basic node element with a list of properties but no xs:type specific extensions
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>uri</em> with a value of a VOSpace identifier, URI-encoded according to RFC2396
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>limit</em> with an integer value indicating the maximum number of results in the response.
    
<ul><li> No limit indicates a request for an unpaged list. However the server MAY still impose its own limit on the size of an individual response, splitting the results into more than one page if required
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul>
The list of supported protocols for a node can be retrieved with:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<ul><li> A HTTP POST of an empty protocol representation to the URL of an existing node http://rest-endpoint/nodes/path
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
A HTTP 200 status code and a Node representation in the entity-body
When no parameters are present in the request, the full expanded record for the node SHALL be returned, including any xs:type specific extensions; otherwise the appropriate form for the specified value of the "detail" parameter SHALL be returned.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
When the node is a container, the returned record will also contain a list of direct children nodes in the container (as &lt;node&gt; subelements under the &lt; nodes&gt; element).

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If a "uri" and "offset" are specified in the request then the returned list will consist of the subset of children which begins at the node matching the specified value of the "uri" parameter and with cardinality matching the specified value of the "offset" parameter drawn from an ordered sequence of all children. The ordering is determined by the server but results must always be drawn from the same ordered sequence.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
For the target node and for any children returned for a container node, the attribute <em>xs:type</em> SHALL be included in the resulting Node document.  

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>

<ul><li> The service SHOULD throw a HTTP 500 status code including an InternalFault fault in the entity-body if the operation fails
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 403 status code including a PermissionDenied fault in the entity-body if the user does not have permissions to perform the operation
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 404 status code including a NodeNotFound fault in the entity-body if the target Node does not exist
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
Get a VOSpace node
<br/>

Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v "http://server.example.com/vospace/nodes/mydir?detail=min&amp;uri=vos://example.com!vospace/mydir/file3401"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/nodes/mydir?detail=min&amp;uri=vos://example.com!vospace/mydir/file3401 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Sun, 24 May 2015 22:18:15 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Content-Length: 1205
&lt; Connection: close
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:node xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" uri="vos://example.com!vospace/mydir" xs:type="vos:ContainerNode"&gt;
  &lt;vos:properties&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#description"&gt;My award winning images&lt;/property&gt;
  &lt;/vos:properties&gt;
  &lt;vos:accepts&gt;
    &lt;vos:view uri="ivo://ivoa.net/vospace/core#anyview"/&gt;
  &lt;/vos:accepts&gt;
  &lt;vos:provides&gt;
    &lt;vos:view uri="ivo://ivoa/net/vospace/core#defaultview"/&gt;
  &lt;/vos:provides&gt;
  &lt;vos:capabilities/&gt;
  &lt;vos:nodes&gt;
    &lt;vos:node uri="vos://example.com!vospace/mydir/file3401" xs:type="vos:DataNode"/&gt;
    &lt;vos:node uri="vos://example.com!vospace/mydir/file3406" xs:type="vos:DataNode"/&gt;
    &lt;vos:node uri="vos://example.com!vospace/mydir/file3532" xs:type="vos:DataNode"/&gt;
  &lt;/vos:nodes&gt;
* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.3.2"/><h4>
5.3.2  setNode</h4>
<a id="subsubsec:setnode">
</a>
Set the property values for a specific Node

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP POST of a Node representation to the URL of an existing node http://rest-endpoint/nodes/path including:

<ul><li> <em>node</em>: A Node containing the Node uri and a list of the Properties to set (as defined in section 3.1)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul>
This will add or update the node properties including any xs:type specific elements.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The operation is the union of existing values and new ones.  An empty value sets the value to blank.  To delete a Property, set the xs:nil attribute to true

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This method cannot be used to modify the Node type.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This method cannot be used to modify the accepts or provides list of Views for the Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This method cannot be used to create children of a container Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
A HTTP 200 status code and a Node representation in the entity-body
The full expanded record for the node SHALL be returned, including any xs:type specific extensions.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>

<ul><li> The service SHOULD throw a HTTP 500 status code including an InternalFault fault in the entity-body if the operation fails
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 403 status code including a PermissionDenied fault in the entity-body if the request attempts to modify a read-only Property
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 403 status code including a PermissionDenied fault in the entity-body if the user does not have permissions to perform the operation
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 404 status code including a NodeNotFound fault in the entity-body if the target Node does not exist
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> If a parent node in the URI path does not exist then the service SHALL throw a HTTP 404 status code including a ContainerNotFound fault in the entity-body
    
<ul><li> For example, given the URI path /a/b/c, the service must throw a HTTP 404 status code including a ContainerNotFound fault in the entity-body if either /a or /a/b do not exist.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> The service SHALL throw a HTTP 400 status code including an InvalidArgument fault in the entity-body if a specified property value is invalid
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
Set node metadata
<br/>

The updated node (setNode.xml) is:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;node xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:type="vos:UnstructuredDataNode" xmlns="http://www.ivoa.net/xml/VOSpace/v2.1" uri="vos://nvo.caltech!vospace/mydata1"&gt;
  &lt;properties&gt;
    &lt;property uri="ivo://ivoa.net/vospace/core#title" readOnly="false"&gt;Title for my data&lt;/property&gt;
  &lt;/properties&gt;
  &lt;accepts/&gt;
  &lt;provides/&gt;
  &lt;capabilities/&gt;
&lt;/node&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @setNode.xml -H "Content-type: text/xml" "http://server.example.com/vospace/nodes/mydata1"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; POST /vospace/nodes/mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-type: text/xml
&gt; Content-Length: 399
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Sun, 24 May 2015 23:02:10 GMT
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Content-Length: 1138
&lt; Connection: close
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:node xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" uri="vos://cadc.nrc.ca!vospace/mydata1" xs:type="vos:DataNode" busy="false"&gt;
  &lt;vos:properties&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#length" readOnly="true"&gt;44&lt;/vos:property&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#MD5" readOnly="true"&gt;12c13e49f2fd37e2c91bcca6acb78a08&lt;/vos:property&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#date" readOnly="true"&gt;2015-05-24T23:02:10.397&lt;/vos:property&gt;
    &lt;vos:property uri="ivo://ivoa.net/vospace/core#title" readOnly="false"&gt;Title for my data&lt;/vos:property&gt;
  &lt;/vos:properties&gt;
  &lt;vos:accepts&gt;
    &lt;vos:view uri="ivo://ivoa.net/vospace/core#anyview"/&gt;
  &lt;/vos:accepts&gt;
  &lt;vos:provides /&gt;
&lt;/vos:node&gt;
* Closing connection #0
end{lstlisting}

\subsubsection{findNodes}
\label{subsubsec:findnodes}
Find nodes whose properties match the specified values.

This operation is OPTIONAL.

\paragraph{Request}
A HTTP POST of a Job representation of a Search (see section 3.7) to http://rest-endpoint/searches
A null value of the "matches" parameter implies a full listing of the space.

\paragraph{Response}
The initial response is a HTTP 303 status code with the Location header keyword assigned to the created job.

The search results representation can be retrieved directly from the link reported in the Results List, available from the results endpoint - http://rest-endpoint/searches/(jobid)/results -, the standard UWS location under the results endpoint - http://rest-endpoint/searches/(jobid)/results/searchDetails - (which may well just be a redirect to the former link), or as part of the full Job representation from http://rest-endpoint/searches/(jobid). The result element in the Results List SHALL have an id of "searchDetails":

\begin{lstlisting}
&lt;uws:job&gt;
...
  &lt;uws:results&gt;
   &lt;uws:result id="searchDetails" xlink:href="http://rest-endpoint/searches/(jobid)/results/listing1"/&gt;
  &lt;/uws:results&gt;
...
&lt;/uws:job&gt;
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>
For all faults, the service shall set the PHASE to "ERROR" in the Job representation. The &lt;errorSummary&gt; element in the Job representation shall be set to the appropriate value for the fault type and the appropriate fault representation (see section 5.5) provided at the error URI: http://rest-endpoint/transfers/(jobid)/error.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table class="tabular"><tr><td width="197"><b>Fault description</b> </td><td align="left"><b>errorSummary</b> </td><td width="158"><b>Fault representation</b> </td></tr><tr><td width="197">Operation not supported </td><td align="left">Operation Not Supported </td><td width="158">OperationNotSupported </td></tr><tr><td width="197">Operation fails </td><td align="left">Internal Fault </td><td width="158">InternalFault </td></tr><tr><td width="197">User does not have permissions to perform the operation	 </td><td align="left">Permission Denied </td><td width="158">PermissionDenied </td></tr><tr><td width="197">A particular property is specified and does not exist in the space </td><td align="left">Property Not Found </td><td width="158">PropertyNotFound </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">TO BE COMPLETED
TODO: Add vos:search type to VOSpace-2.1.XSD
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Find VOSpace nodes
<br/>

The Job to be submitted (searchJob.xml) is:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:search xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:detail&gt;properties&lt;/vos:detail&gt;
  &lt;vos:matches&gt;ivo://ivoa.net/vospace/core#description='galax'&lt;/vos:matches&gt;
&lt;vos:search&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @searchJob.xml -H "Content-type: text/xml" "http://localhost:8000/searches"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* Connected to localhost (127.0.0.1) port 8000 (#0)
&gt; POST /searches HTTP/1.1
&gt; User-Agent: curl/7.19.4 (universal-apple-darwin10.0) libcurl/7.19.4 OpenSSL/0.9.8l zlib/1.2.3
&gt; Host: localhost:8000
&gt; Accept: */*
&gt; Content-Length: 684
&gt; Content-Type: application/x-www-form-urlencoded
&gt; 
&lt; HTTP/1.1 303 See Other
&lt; Content-Length: 172
&lt; Server: CherryPy/3.1.2
&lt; Location: http://localhost:8080/searches/8c5b0f78cd5a44af8694f10da1b92060
&lt; Allow: DELETE, GET, HEAD, POST, PUT
&lt; Date: Fri, 12 Mar 2010 19:50:12 GMT
&lt; Content-Type: text/html
&lt; 
* Connection #0 to host localhost left intact
* Closing connection #0
</pre></div>
This resource can be found at:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">http://localhost:8080/searches/8c5b0f78cd5a44af8694f10da1b92060
</pre></div>
The status of the job can now be polled at the job location:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v "http://localhost:8000/searches/8c6e7bc53ee848638cda35817e47da65"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* Connected to localhost (127.0.0.1) port 8000 (#0)
&gt; GET /searches/8c6e7bc53ee848638cda35817e47da65 HTTP/1.1
&gt; User-Agent: curl/7.19.4 (universal-apple-darwin10.0) libcurl/7.19.4 OpenSSL/0.9.8l zlib/1.2.3
&gt; Host: localhost:8000
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Date: Fri, 12 Mar 2010 19:51:24 GMT
&lt; Content-Length: 891
&lt; Content-Type: text/html
&lt; Allow: DELETE, GET, HEAD, POST, PUT
&lt; Server: CherryPy/3.1.2
&lt; 
&lt;uws:job xmlns:uws="http://www.ivoa.net/xml/UWS/v1.0" xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:schemaLocation="http://www.ivoa.net/xml/UWS/v1.0 UWS.xsd "&gt;
  &lt;uws:jobId&gt;8c6e7bc53ee848638cda35817e47da65&lt;
  &lt;uws:ownerId xs:nil="true"/&gt;
  &lt;uws:phase&gt;COMPLETED&lt;/uws:phase&gt;
  &lt;uws:startTime&gt;2010-03-12T19:50:56.552278&lt;/uws:startTime&gt;
  &lt;uws:endTime&gt;2010-03-12T19:50:56.562416&lt;/uws:endTime&gt;
  &lt;uws:executionDuration&gt;0&lt;/uws:executionDuration&gt;
  &lt;uws:destruction xs:nil="true"/&gt;
  &lt;uws:jobInfo&gt;
    &lt;vos:search&gt;
      &lt;vos:detail&gt;properties&lt;/vos:detail&gt;
      &lt;vos:matches&gt;ivo://ivoa.net/vospace/core#description='galax'&lt;/vos:matches&gt;
    &lt;vos:search&gt;
  &lt;uws:jobInfo&gt;
  &lt;uws:results&gt;
    &lt;uws:result id="searchDetails" xlink:href="http://localhost:8000/searches/d55814f88d974c21afe5ad50e4e875c8/results/listing1"/&gt;
  &lt;/uws:results&gt;
&lt;/uws:job&gt;
* Connection #0 to host localhost left intact
* Closing connection #0
</pre></div>
Once the Job has completed, the result can be obtained from the URL reported in the result element:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v "http://localhost:8000/searches/d55814f88d974c21afe5ad50e4e875c8/results/listing1"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* Connected to localhost (127.0.0.1) port 8000 (#0)
&gt; GET /searches/d55814f88d974c21afe5ad50e4e875c8/results/listing1 HTTP/1.1
&gt; User-Agent: curl/7.19.4 (universal-apple-darwin10.0) libcurl/7.19.4 OpenSSL/0.9.8l zlib/1.2.3
&gt; Host: localhost:8000
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Date: Fri, 12 Mar 2010 20:29:25 GMT
&lt; Content-Length: 586
&lt; Content-Type: text/html
&lt; Allow: DELETE, GET, HEAD, POST, PUT
&lt; Server: CherryPy/3.1.2
&lt; 
&lt;nodes xmlns="http://www.ivoa.net/xml/VOSpace/v2.1"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;node uri="vos://nvo.caltech!vospace/mydir/img1" xs:type="vos:UnstructuredDataNode"&gt;
    &lt;properties&gt;
      &lt;property uri="ivo://ivoa.net/vospace/core#description"&gt;This is an R-band image of the galaxy NGC 3276&lt;/property&gt;
    &lt;/properties&gt;
  &lt;/node&gt;
  &lt;node uri="vos://nvo.caltech!vospace/mydir/img5" xs:type="vos:StructuredDataNode"&gt;
    &lt;properties&gt;
      &lt;property uri="ivo://ivoa.net/vospace/core#description"&gt;This is a Chandra mosaic of the Fornax cluster of galaxies&lt;/property&gt;
    &lt;/properties&gt;
  &lt;/node&gt;
&lt;/nodes&gt;
* Connection #0 to host localhost left intact
* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc5.4"/><h3>
5.4  Transferring data</h3>
<a id="subsec:transferringdata">
</a>
Two modes are supported for external data transfers: a simple HTTP GET to retrieve data from a service (pullFromVoSpace) and a more general mechanism which employs a UWS-based approach [UWS] for submitting general data transfer requests (see section <a href="#subsec:transfers">3.6</a>). In the latter, four directions are specified in which external data transfers can happen:

<ul><li> sending data to a service (pushToVoSpace)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> importing data into a service (pullToVoSpace)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> reading data from a service (pullFromVoSpace)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> sending data from a service (pushFromVoSpace)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A transfer job is created by a HTTP POST of an appropriate Job representation to the transfers endpoint of the service: http://rest-endpoint/transfers.  The following example shows a transfer document for a pushToVoSpace operation:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;   
  &lt;vos:target&gt;vos://server.example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
  &lt;vos:view uri="ivo://net.ivoa/vospace/core#fits"/&gt;
  &lt;vos:protocol uri="ivo://net.ivoa/vospace/core#httpsput"&gt;
       &lt;vos:securityMethod uri="ivo://ivoa.net/sso#tls-with-certificate"/&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This example transfer job is making a request for an TLS endpoint that supports client certificates that is to be used for performing an HTTP PUT of a file.  

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service returns the UWS jobid of the transfer and it can then be initiated with a HTTP POST of the single parameter "PHASE=RUN" to the appropriate job endpoint: http://rest-endpoint/transfers/(jobid)/phase. Alternatively the transfer can also be run immediately on creation by adding a "PHASE=RUN" to the initial Job representation.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The status of any transfer can be obtained by polling the phase endpoint for a particular transfer, i.e. a HTTP GET to http://rest-endpoint/transfers/(jobid)/phase.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Once a transfer has completed, any results can be obtained by following the link in the Results List available from the results endpoint for that transfer, i.e. with a HTTP GET to http://rest-endpoint/transfers/(jobid)/results. This pertains particularly to the transfer methods in which data is sent to or read from a service-negotiated URL (pushToVoSpace and pullFromVoSpace).

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A transfer can also be aborted at any stage with a HTTP POST of the parameter "PHASE=ABORT" to the endpoint: http://rest-endpoint/transfers/(jobid)/phase

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
More specific details for each of the four directions are given in the sections following.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.4.1"/><h4>
5.4.1  pushToVoSpace</h4>
<a id="subsubsec:pushtovospace">
</a>
Request a list of URLs to send data to a VOSpace node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This method asks the server for a list of one or more URLs that the client can use to send data to.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The data transfer is initiated by the client, after it has received the response from the VOSpace service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The primary use case for this method is client that wants to send some data directly to a VOSpace service.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This operation is OPTIONAL.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
An HTTP POST of a Job representation for the transfer to http://rest-endpoint/transfers or http://rest-endpoint/synctrans

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If a Node already exists at the target URI, then the data SHALL be imported into the existing Node and the Node properties SHALL be cleared unless the node is a ContainerNode.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If there is no Node at the target URI, then the service SHALL create a new Node using the uri and the default xs:type for the space.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The transfer representation contains details of the View and a list of the Protocols (and, optionally, the preferred security method(s) per protocol) that the client wants to use.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The list of Protocols SHOULD not contain endpoint addresses, the service will supply the endpoint addresses in the response.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service SHALL ignore any of the requested protocols and security methods that it does not understand or is unable to support.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
.auto is the reserved URI to indicate an auto-generated URI for the destination, i.e. vos://service/path/.auto SHOULD cause a new unique URI for the node within vos://service/path to be generated.  If supported, this URI SHALL be specified as a result in the Results list for the completed transfer with the id of "target".

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A pushToVoSpace transfer may be initiated with an HTTP POST of a Job representation of the transfer to http://rest-endpoint/transfers. The service SHALL respond with a redirect to the newly created job.  (See Example 1)

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A pushToVoSpace transfer may be initiated with an HTTP POST of a Job representation of the transfer to http://rest-endpoint/synctrans. The service SHALL respond with a redirect to the transfer details of the job.  (See Example 2)

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A pushToVoSpace transfer may be initiated with an HTTP POST or GET to http://rest-endpoint/synctrans with the following URL query parameters:

<ul><li> <em>TARGET</em>: The value is the URI of the target node
        
<ul><li> Example:  vos://example.com ∼ vospace/mydata1
        
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>DIRECTION</em>: pushToVoSpace
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>PROTOCOL</em>: The standard URI of the protocol to use (see section  <a href="#subsubsec:standard protocols">3.5.3</a>)
        
<ul><li> Example: ivo://ivoa.net/vospace/core#httpput
        
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul>
The service SHALL respond with the job containing the transfer results in the response body.  (See Example 3)

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
Redirect responses are a HTTP 303 status code with the Location header keyword assigned to the created job.
The service SHALL select which of the requested Protocols it is willing to provide and fill in the operational details for each one in the transfer result representation - this SHOULD normally include specifying the destination URL of the transfer protocol endpoint.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The transfer result SHOULD not include any Protocols or security methods that it is unable to support.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The transfer results representation can be retrieved directly from the link reported in the Results List, available either from the results endpoint - http://rest-endpoint/transfers/(jobid)/results - or as part of the full Job representation for the completed transfer available from http://rest-endpoint/transfers/(jobid). The result element in the Results List SHALL have an id of "transferDetails":
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;uws:job&gt;
...
  &lt;uws:results&gt;
   &lt;uws:result id="transferDetails" xlink:href="http://rest-endpoint/transfers/(jobid)/results/details1"/&gt;
  &lt;/uws:results&gt;
...
&lt;/uws:job&gt;
</pre></div>
For synchronous job postings:

<ul><li> A HTTP 303 status code with the Location header keyword assigned to the endpoint: http://rest-endpoint/transfers/(jobid)/results/transferDetails.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul>
The HTTP 303 redirect points to a transfer representation with the required transfer details and endpoints.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>
For all faults using the UWS mode, the service shall set the PHASE to ËRROR" in the Job representation. The &lt;errorSummary&gt; element in the Job representation shall be set to the appropriate value for the fault type and the appropriate fault representation (see section 5.5) provided at the error URI: http://rest-endpoint/transfers/(jobid)/error.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table class="tabular"><tr><td width="197"><b>Fault description</b> </td><td align="left"><b>errorSummary</b> </td><td width="158"><b>Fault representation</b> </td></tr><tr><td width="197">Operation not supported </td><td align="left">Operation Not Supported </td><td width="158">OperationNotSupported </td></tr><tr><td width="197">Operation fails </td><td align="left">Internal Fault </td><td width="158">InternalFault </td></tr><tr><td width="197">User does not have permissions to perform the operation </td><td align="left">Permission Denied </td><td width="158">PermissionDenied </td></tr><tr><td width="197">Service does not support the requested View </td><td align="left">View Not Supported </td><td width="158">ViewNotSupported </td></tr><tr><td width="197">Service supports none of the requested Protocols </td><td align="left">Protocol Not Supported </td><td width="158">ProtocolNotSupported </td></tr><tr><td width="197">A View parameter is invalid </td><td align="left">Invalid Argument </td><td width="158">InvalidArgument </td></tr><tr><td width="197">A Protocol parameter is invalid </td><td align="left">Invalid Argument </td><td width="158">InvalidArgument </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If an error occurs with the synchronous convenience mode, the resulting transfers document SHOULD have no protocols. The client can then retrieve the Job representation for error information as with asynchronous transfers.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example 1  </b>
pushToVoSpace over the asynchronous endpoint
<br/>

The Job to be submitted (pushToVoSpace.xml):
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
  &lt;vos:view uri="ivo://ivoa.net/vospace/core#fits"/&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput" /&gt;
  &lt;vos:param uri="ivo://ivoa.net/vospace/core#length"&gt;388943&lt;/vos:param&gt;
&lt;/vos:transfer&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @pushToVoSpace.xml -H "Content-type: text/xml" "http://server.example.com/vospace/transfers"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; POST /vospace/transfers HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-type: text/xml
&gt; Content-Length: 311
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Mon, 25 May 2015 23:06:45 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/zkqzpftmufdi8luh
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The PENDING job can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/transfers/zkqzpftmufdi8luh
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/zkqzpftmufdi8luh HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:12:24 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;uws:job xmlns:uws="http://www.ivoa.net/xml/UWS/v1.0" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;uws:jobId&gt;zkqzpftmufdi8luh&lt;/uws:jobId&gt;
  &lt;uws:phase&gt;PENDING&lt;/uws:phase&gt;
  &lt;uws:quote&gt;2015-05-26T11:06:45.713&lt;/uws:quote&gt;
  &lt;uws:startTime xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:endTime xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:executionDuration&gt;43200&lt;/uws:executionDuration&gt;
  &lt;uws:destruction&gt;2015-06-01T23:06:45.713&lt;/uws:destruction&gt;
  &lt;uws:parameters /&gt;
  &lt;uws:results /&gt;
  &lt;uws:jobInfo&gt;
    &lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
      &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
      &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
      &lt;vos:view uri="ivo://ivoa.net/vospace/core#fits" /&gt;
      &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput" /&gt;
    &lt;/vos:transfer&gt;
  &lt;/uws:jobInfo&gt;
&lt;/uws:job&gt;
* Closing connection #0
</pre></div>
The job can now be started by posting PHASE=RUN:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -X POST -d "PHASE=RUN" http://server.example.com/vospace/transfers/zkqzpftmufdi8luh/phase
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; POST /vospace/transfers/zkqzpftmufdi8luh/phase HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 9
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Mon, 25 May 2015 23:17:41 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.examle.com/vospace/transfers/zkqzpftmufdi8luh
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The EXECUTING job can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">http://server.examle.com/vospace/transfers/zkqzpftmufdi8luh
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/zkqzpftmufdi8luh HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:17:46 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;uws:job xmlns:uws="http://www.ivoa.net/xml/UWS/v1.0" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;uws:jobId&gt;zkqzpftmufdi8luh&lt;/uws:jobId&gt;
  &lt;uws:phase&gt;EXECUTING&lt;/uws:phase&gt;
  &lt;uws:quote&gt;2015-05-26T11:06:45.713&lt;/uws:quote&gt;
  &lt;uws:startTime&gt;2015-05-25T23:17:41.217&lt;/uws:startTime&gt;
  &lt;uws:endTime xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:executionDuration&gt;43200&lt;/uws:executionDuration&gt;
  &lt;uws:destruction&gt;2015-06-01T23:06:45.713&lt;/uws:destruction&gt;
  &lt;uws:parameters /&gt;
  &lt;uws:results&gt;
    &lt;uws:result id="transferDetails" xlink:href="http://server.example.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails" /&gt;
    &lt;uws:result id="dataNode" xlink:href="vos://example.com!vospace/mydata1" /&gt;
  &lt;/uws:results&gt;
  &lt;uws:jobInfo&gt;
    &lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
      &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
      &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
      &lt;vos:view uri="ivo://ivoa.net/vospace/core#fits" /&gt;
      &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput" /&gt;
    &lt;/vos:transfer&gt;
  &lt;/uws:jobInfo&gt;
&lt;/uws:job&gt;
* Closing connection #0
</pre></div>
The details of the transfer negotiation can be see by following the <em>transferDetails</em> result:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/zkqzpftmufdi8luh/results/transferDetails HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:26:48 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Content-Type: text/xml;charset=ISO-8859-1
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"&gt;
    &lt;vos:endpoint&gt;http://storage1.example.com/trans/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"&gt;
    &lt;vos:endpoint&gt;http://storage2.example.com/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
* Closing connection #0
</pre></div>
The FITS file can now be pushed over HTTP PUT to one of the endpoints listed in the transfer details.
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -T mydata1 "http://storage1.example.com/mydata1"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to storage1.example.com port 80 (#0)
*   Trying 132.246.217.45... connected
* Connected to storage1.example.com (132.246.217.45) port 80 (#0)
&gt; PUT /trans/mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: storage1.example.com
&gt; Accept: */*
&gt; Content-Length: 2341
&gt; Expect: 100-continue
&gt;
&lt; HTTP/1.1 100 Continue
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:33:17 GMT
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
On successful file transfer completion the job will be COMPLETED:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v http://server.examle.com/vospace/transfers/zkqzpftmufdi8luh/phase
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/transfers/zkqzpftmufdi8luh/phase HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:37:38 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 9
&lt; Connection: close
&lt;
* Closing connection #0
COMPLETED
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example 2  </b>
pushToVoSpace over the synchronous endpoint
<br/>

The Job to be submitted (pushToVoSpace.xml):
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
  &lt;vos:view uri="ivo://ivoa.net/vospace/core#fits"/&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput" /&gt;
&lt;/vos:transfer&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @pushToVoSpace.xml -H "Content-type: text/xml" "http://server.example.com/vospace/synctrans"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; POST /vospace/synctrans HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 9
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Mon, 25 May 2015 23:17:41 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The negotiated transfer details can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">http://server.examlpe.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/zkqzpftmufdi8luh/results/transferDetails HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:26:48 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Content-Type: text/xml;charset=ISO-8859-1
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"&gt;
    &lt;vos:endpoint&gt;http://storage1.example.com/trans/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"&gt;
    &lt;vos:endpoint&gt;http://storage2.example.com/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example 3  </b>
pushToVoSpace over the synchronous endpoint with securityMethod
<br/>

A transfer request for endpoints supporting basic authentication over HTTP or TLS with a client certificate over SSL.<br/>
The Job to be submitted (pushToVoSpace.xml):
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
  &lt;vos:view uri="ivo://ivoa.net/vospace/core#fits"/&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpsput"&gt;
      &lt;vos:securityMethod uri="ivo://ivoa.net/sso#tls-with-certificate"/&gt;
  &lt;/vos:protocol&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"&gt;
      &lt;vos:securityMethod uri="uri="http://www.w3.org/Protocols/HTTP/1.0/spec/html#BasicAA"/&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @pushToVoSpace.xml -H "Content-type: text/xml" "http://server.example.com/vospace/synctrans"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; POST /vospace/synctrans HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 9
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Mon, 25 May 2015 23:17:41 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The negotiated transfer details can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">http://server.example.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.come/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/zkqzpftmufdi8luh/results/transferDetails HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:26:48 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Content-Type: text/xml;charset=ISO-8859-1
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpsput"&gt;
    &lt;vos:endpoint&gt;https://storage1.example.com/trans/mydata1&lt;/vos:endpoint&gt;
    &lt;vos:securityMethod uri="ivo://ivoa.net/sso#tls-with-certificate"/&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
* Closing connection #0
</pre></div>
The service has replied with a single HTTPS endpoint that support TLS with client certificates.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example 4  </b>
pushToVoSpace over the synchronous endpoint with URL parameters
<br/>

Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -X POST "http://server.example.com/vospace/synctrans?TARGET=vos://example.com~vospace/mydata1&amp;DIRECTION=pushToVoSpace&amp;PROTOCOL=ivo://ivoa.net/vospace/core%23httpput"
</pre></div>
(Note that the # sign in PROTOCOL is URL encoded as %23 and that the alternate separator ` ∼ ' is used instead of `!' in the TARGET) <br/><br/>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; POST /vospace/synctrans?TARGET=vos://example.com~vospace/mydata1&amp;DIRECTION=pushToVoSpace&amp;PROTOCOL=ivo://ivoa.net/vospace/core\%23httpput HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:26:48 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Content-Type: text/xml;charset=ISO-8859-1
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pushToVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"&gt;
    &lt;vos:endpoint&gt;http://storage1.example.com/trans/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpput"&gt;
    &lt;vos:endpoint&gt;http://storage2.example.com/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.4.2"/><h4>
5.4.2  pullToVoSpace</h4>
<a id="subsubsec:pulltovospace">
</a>
Import data into a VOSpace node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This method asks the server to fetch data from a remote location.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The data transfer is initiated by the VOSpace service and transferred direct into the target Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The data source can be another VOSpace service, or a standard HTTP or FTP server.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The primary use case for this method is transferring data from one server or service to another.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This operation is OPTIONAL.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP POST of a Job representation for the transfer to http://rest-endpoint/transfers

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If a Node already exists at the target URI, then the data SHALL be imported into the existing Node and the Node properties SHALL be cleared unless the node is a ContainerNode.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If there is no Node at the target URI, then the service SHALL create a new Node using the uri, and the default xs:type for the space.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
The initial response is a HTTP 303 status code with the Location header keyword assigned to the created job.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b> For all faults, the service shall set the PHASE to ËRROR" in the Job representation. The &lt;errorSummary&gt; element in the Job representation shall be set to the appropriate value for the fault type and the appropriate fault representation (see section 5.5) provided at the error URI: http://rest-endpoint/transfers/(jobid)/error.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table class="tabular"><tr><td width="197"><b>Fault description</b> </td><td align="left"><b>errorSummary</b> </td><td width="158"><b>Fault representation</b> </td></tr><tr><td width="197">Operation not supported </td><td align="left">Operation Not Supported </td><td width="158">OperationNotSupported </td></tr><tr><td width="197">Operation fails </td><td align="left">Internal Fault </td><td width="158">InternalFault </td></tr><tr><td width="197">User does not have permissions to perform the operation </td><td align="left">Permission Denied </td><td width="158">PermissionDenied </td></tr><tr><td width="197">Service does not support the requested View </td><td align="left">View Not Supported </td><td width="158">ViewNotSupported </td></tr><tr><td width="197">Service supports none of the requested Protocols </td><td align="left">Protocol Not Supported </td><td width="158">ProtocolNotSupported </td></tr><tr><td width="197">Destination URI is invalid </td><td align="left">Invalid URI </td><td width="158">InvalidURI </td></tr><tr><td width="197">A View parameter is invalid </td><td align="left">Invalid Argument </td><td width="158">InvalidArgument </td></tr><tr><td width="197">A Protocol parameter is invalid </td><td align="left">Invalid Argument </td><td width="158">InvalidArgument </td></tr><tr><td width="197">Data format does not match the requested View </td><td align="left">Invalid Data </td><td width="158">InvalidData </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Notes  </b>
If the Job request contains more than one protocol parameter, then the service MAY fail over to use one or more of the options if the first one fails. The service SHOULD try each protocol option in turn until one succeeds or all have been tried.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
pullToVoSpace
<br/><br/>noindent
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">TO BE COMPLETED
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.4.3"/><h4>
5.4.3  pullFromVoSpace</h4>
<a id="subsubsec:pullfromvospace">
</a>
Request a set of URLs that the client can read data from.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The client requests access to the data in a Node, and the server SHALL respond with a set of URLs that the client can read the data from.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP POST of a Job representation for the transfer to http://rest-endpoint/transfers or http://rest-endpoint/synctrans
The transfer representation SHOULD contain details of the View and a list of the Protocols that the client would like to use.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The list of Protocols SHOULD not contain endpoint addresses; the service SHALL supply the endpoint addresses in the response.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service SHALL ignore any of the requested protocols and security methods that it does not understand or is unable to support.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A pullFromVoSpace transfer may be initiated with an HTTP POST of a Job representation of the transfer to http://rest-endpoint/transfers. The service SHALL respond with a redirect to the newly created job.  (See Example 1)

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A pullFromVoSpace transfer may be initiated with an HTTP POST of a Job representation of the transfer to http://rest-endpoint/synctrans. The service SHALL respond with a redirect to the transfer details of the job.  (See Example 2)

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
A pullFromVoSpace transfer may be initiated with an HTTP POST or GET to http://rest-endpoint/synctrans with the following URL query parameters:

<ul><li> <em>TARGET</em>: The value is the URI of the target node
        
<ul><li> Example:  vos://example.com ∼ vospace/mydata1
        
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>DIRECTION</em>: pullFromVoSpace
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> <em>PROTOCOL</em>: The standard URI of the protocol to use (see section  <a href="#subsubsec:standard protocols">3.5.3</a>)
        
<ul><li> Example: ivo://ivoa.net/vospace/core#httpget
        
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul>
The service SHALL respond with the job containing the transfer results in the response body.  (See Example 3)
If the parameter key value REQUEST=redirect is included with the other transfer parameters, the service SHALL respond with an immediate redirect to the preferred protocol endpoint for data download.  (See Example 4)

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
There is also an alternate convenience mode of for full data download using view=data on the http://rest-endpoint/nodes resource (This alternative is now deprecated and will be removed in v3.0.  This convenience mode has been replaced with the REQUEST=redirect functionality)

<ul><li> A HTTP GET to the node URL that wants to be read with a parameter of "view = data": <br/>
        http://rest-endpoint/nodes/path?view=data
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
Clients may also use the "view" parameter on the getNode operation. Services may support different types of views for particular purposes. e.g., "view=rss" to identify a RSS feed on the resource.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
The initial response for the UWS mode is a HTTP 303 status code with the Location header keyword assigned to the created job
The service SHALL select which of the requested Protocols it is willing to provide and fill in the operational details for each one in the transfer result representation - this SHOULD normally include specifying the source URL of the transfer protocol endpoint.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The service response SHOULD not include any Protocols that it is unable to support.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The transfer results representation can be retrieved directly from the link reported in the Results List, available either from the results endpoint - http://rest-endpoint/transfers/(jobid)/results - or as part of the full Job representation for the completed transfer available from http://rest-endpoint/transfers/(jobid). In the latter case, the result element in the Results List SHALL have an id of "transferDetails":
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;uws:job&gt;
...
  &lt;uws:results&gt;
   &lt;uws:result id="transferDetails" xlink:href="http://rest-endpoint/transfers/(jobid)/results/details1"/&gt;
  &lt;/uws:results&gt;
...
&lt; /uws:job&gt;
</pre></div>
If the transfer was initiated with a HTTP POST to http://rest-endpoint/sync then the response is:

<ul><li> A HTTP 303 status code with the Location header keyword assigned to the endpoint: http://rest-endpoint/transfers/(jobid)/results/transferDetails.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul>
The HTTP 303 redirect points to a transfer representation with the required transfer details and endpoints.
If the transfer was initiated with a HTTP POST to http://rest-rendpoint/sync with transfer information TARGET, DIRECTION, and PROTOCOL supplied as query string parameters, the service may respond with the transfer details directly. If the parameter REQUEST=redirect is also provided in this POST, then the service may respond with a redirect to a preferred endpoint (example below).

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Faults  </b>
For all faults using the UWS mode, the service shall set the PHASE to ËRROR" in the Job representation. The &lt;errorSummary&gt; element in the Job representation shall be set to the appropriate value for the fault type and the appropriate fault representation (see section 5.5) provided at the error URI: http://rest-endpoint/transfers/(jobid)/error.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table class="tabular"><tr><td width="197"><b>Fault description</b> </td><td align="left"><b>errorSummary</b> </td><td width="158"><b>Fault representation</b> </td></tr><tr><td width="197">Operation fails </td><td align="left">Internal Fault </td><td width="158">InternalFault </td></tr><tr><td width="197">User does not have permissions to perform the operation	 </td><td align="left">Permission Denied </td><td width="158">PermissionDenied </td></tr><tr><td width="197">Source Node does not exist </td><td align="left">Node Not Found </td><td width="158">NodeNotFound </td></tr><tr><td width="197">Service does not support the requested View </td><td align="left">View Not Supported </td><td width="158">ViewNotSupported </td></tr><tr><td width="197">Service supports none of the requested Protocols </td><td align="left">Protocol Not Supported </td><td width="158">ProtocolNotSupported </td></tr><tr><td width="197">Destination URI is invalid </td><td align="left">Invalid URI </td><td width="158">InvalidURI </td></tr><tr><td width="197">A View parameter is invalid </td><td align="left">Invalid Argument </td><td width="158">InvalidArgument </td></tr><tr><td width="197">A Protocol parameter is invalid </td><td align="left">Invalid Argument </td><td width="158">InvalidArgument </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If an error occurs with the synchronous convenience mode, the resulting transfers document SHOULD have no protocols. The client can then retrieve the Job representation for error information as with asynchronous transfers.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
If an error occurs with the synchronous convenience mode where the preferred endpoint is immediately returned as a redirect, the error information is returned directly in the response body with the associated HTTP status code.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Notes  </b>
The endpoint URLs supplied in the UWS response SHOULD be considered as 'one shot' URLs. A VOSpace service connected to a standard web server MAY return the public URL for the data. However, a different implementation MAY create a unique single use URL specifically for this transfer.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example 1  </b>
pullFromVoSpace over the asynchronous endpoint
<br/>

The Job to be submitted (pullFromVoSpace.xml):
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget" /&gt;
&lt;/vos:transfer&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @pullFromVoSpace.xml -H "Content-type: text/xml" "http://server.example.com/vospace/transfers"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; POST /vospace/transfers HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-type: text/xml
&gt; Content-Length: 311
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Mon, 25 May 2015 23:06:45 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/m4ipu36gairz0dnl
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The PENDING job can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/transfers/m4ipu36gairz0dnl
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/m4ipu36gairz0dnl HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:12:24 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;uws:job xmlns:uws="http://www.ivoa.net/xml/UWS/v1.0" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;uws:jobId&gt;m4ipu36gairz0dnl&lt;/uws:jobId&gt;
  &lt;uws:phase&gt;PENDING&lt;/uws:phase&gt;
  &lt;uws:quote&gt;2015-05-26T11:06:45.713&lt;/uws:quote&gt;
  &lt;uws:startTime xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:endTime xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:executionDuration&gt;43200&lt;/uws:executionDuration&gt;
  &lt;uws:destruction&gt;2015-06-01T23:06:45.713&lt;/uws:destruction&gt;
  &lt;uws:parameters /&gt;
  &lt;uws:results /&gt;
  &lt;uws:jobInfo&gt;
    &lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
      &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
      &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt;
      &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget" /&gt;
    &lt;/vos:transfer&gt;
  &lt;/uws:jobInfo&gt;
&lt;/uws:job&gt;
* Closing connection #0
</pre></div>
The job can now be started by posting PHASE=RUN:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -X POST -d "PHASE=RUN" http://server.example.com/vospace/transfers/m4ipu36gairz0dnl/phase
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; POST /vospace/transfers/m4ipu36gairz0dnl/phase HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 9
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Mon, 25 May 2015 23:17:41 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.examle.com/vospace/transfers/m4ipu36gairz0dnl
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The EXECUTING job can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">http://server.examle.com/vospace/transfers/m4ipu36gairz0dnl
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/m4ipu36gairz0dnl HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:17:46 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/xml
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;uws:job xmlns:uws="http://www.ivoa.net/xml/UWS/v1.0" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;uws:jobId&gt;m4ipu36gairz0dnl&lt;/uws:jobId&gt;
  &lt;uws:phase&gt;EXECUTING&lt;/uws:phase&gt;
  &lt;uws:quote&gt;2015-05-26T11:06:45.713&lt;/uws:quote&gt;
  &lt;uws:startTime&gt;2015-05-25T23:17:41.217&lt;/uws:startTime&gt;
  &lt;uws:endTime xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xs:nil="true" /&gt;
  &lt;uws:executionDuration&gt;43200&lt;/uws:executionDuration&gt;
  &lt;uws:destruction&gt;2015-06-01T23:06:45.713&lt;/uws:destruction&gt;
  &lt;uws:parameters /&gt;
  &lt;uws:results&gt;
    &lt;uws:result id="transferDetails" xlink:href="http://server.example.com/vospace/transfers/m4ipu36gairz0dnl/results/transferDetails" /&gt;
    &lt;uws:result id="dataNode" xlink:href="vos://example.com!vospace/mydata1" /&gt;
  &lt;/uws:results&gt;
  &lt;uws:jobInfo&gt;
    &lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
      &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
      &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt;
      &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget" /&gt;
    &lt;/vos:transfer&gt;
  &lt;/uws:jobInfo&gt;
&lt;/uws:job&gt;
* Closing connection #0
</pre></div>
The details of the transfer negotiation can be see by following the <em>transferDetails</em> result:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/transfers/m4ipu36gairz0dnl/results/transferDetails
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/m4ipu36gairz0dnl/results/transferDetails HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:26:48 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Content-Type: text/xml;charset=ISO-8859-1
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"&gt;
    &lt;vos:endpoint&gt;http://storage1.example.com/trans/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"&gt;
    &lt;vos:endpoint&gt;http://storage2.example.com/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
* Closing connection #0
</pre></div>
The file can now be retrieved over HTTP GET from one of the endpoints listed in the transfer details.
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -o mydata1 "http://storage1.example.com/mydata1"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to storage1.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to storage1.example.com (192.168.0.0) port 80 (#0)
&gt; GET /mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: storage1.example.com
&gt; Accept: */*
&gt;
  \% Total  \% Received \% Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0&lt; HTTP/1.1 401 Unauthorized
&lt; Date: Fri, 29 May 2015 18:33:29 GMT
&lt; Content-MD5:
&lt; Content-Disposition:
&lt; Content-Encoding:
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 12
&lt; Connection: close
&lt;
{ [data not shown]
  0    12    0    12    0     0   1717      0 --:--:-- --:--:-- --:--:--  6000* Closing connection #0
</pre></div>
On successful file transfer completion the job will be COMPLETED:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v http://server.examle.com/vospace/transfers/m4ipu36gairz0dnl/phase
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; GET /vospace/transfers/m4ipu36gairz0dnl/phase HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:37:38 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Accept-Ranges: bytes
&lt; Vary: Accept-Charset,Accept-Encoding,Accept-Language,Accept
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 9
&lt; Connection: close
&lt;
* Closing connection #0
COMPLETED
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
<b>Example 2  </b>
pullFromVoSpace over the synchronous endpoint
<br/>

The Job to be submitted (pullFromVoSpace.xml):
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget" /&gt;
&lt;/vos:transfer&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @pullFromVoSpace.xml -H "Content-type: text/xml" "http://server.example.com/vospace/synctrans"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; POST /vospace/synctrans HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 9
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Mon, 25 May 2015 23:17:41 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/m4ipu36gairz0dnl/results/transferDetails
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The negotiated transfer details can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">http://server.examlpe.com/vospace/transfers/m4ipu36gairz0dnl/results/transferDetails
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/transfers/m4ipu36gairz0dnl/results/transferDetails
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/m4ipu36gairz0dnl/results/transferDetails HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:26:48 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Content-Type: text/xml;charset=ISO-8859-1
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"&gt;
    &lt;vos:endpoint&gt;http://storage1.example.com/trans/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"&gt;
    &lt;vos:endpoint&gt;http://storage2.example.com/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
* Closing connection #0
</pre></div>
The file can be retrieved with an HTTP GET to one of the endpoints:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -o mydata1 http://storage1.example.com/mydata1
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to storage1.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to storage1.example.com (192.168.0.0) port 80 (#0)
&gt; GET /mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: storage1.example.com
&gt; Accept: */*
&gt;
  \% Total  \% Received \% Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0&lt; HTTP/1.1 401 Unauthorized
&lt; Date: Fri, 29 May 2015 18:33:29 GMT
&lt; Content-MD5:
&lt; Content-Disposition:
&lt; Content-Encoding:
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 12
&lt; Connection: close
&lt;
{ [data not shown]
  0    12    0    12    0     0   
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example 3  </b>
pullFromVoSpace over the synchronous endpoint with securityMethod
<br/>

A transfer request for endpoints supporting basic authentication over HTTP or TLS with a client certificate over SSL.<br/>
The Job to be submitted (pullFromVoSpace.xml):
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpsget"&gt;
      &lt;vos:securityMethod uri="ivo://ivoa.net/sso#tls-with-certificate"/&gt;
  &lt;/vos:protocol&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"&gt;
      &lt;vos:securityMethod uri="uri="http://www.w3.org/Protocols/HTTP/1.0/spec/html#BasicAA"/&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v -X POST -d @pullFromVoSpace.xml -H "Content-type: text/xml" "http://server.example.com/vospace/synctrans"
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; POST /vospace/synctrans HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt; Content-Length: 9
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Mon, 25 May 2015 23:17:41 GMT
&lt; Accept-Ranges: bytes
&lt; Location: http://server.example.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The negotiated transfer details can be seen by following the redirect to:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">http://server.examlpe.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
</pre></div>
Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">&gt; curl -v http://server.example.com/vospace/transfers/zkqzpftmufdi8luh/results/transferDetails
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 132.246.217.44... connected
* Connected to server.example.com (132.246.217.44) port 80 (#0)
&gt; GET /vospace/transfers/zkqzpftmufdi8luh/results/transferDetails HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:26:48 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Content-Type: text/xml;charset=ISO-8859-1
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpsget"&gt;
    &lt;vos:endpoint&gt;https://storage1.example.com/trans/mydata1&lt;/vos:endpoint&gt;
    &lt;vos:securityMethod uri="ivo://ivoa.net/sso#tls-with-certificate"/&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
* Closing connection #0
</pre></div>
The service has replied with a single HTTPS endpoint that support TLS with client certificates.<br/>
The file can be retrieved with an HTTPS GET to the endpoint:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -o mydata1 -E mycert.pem https://storage1.example.com/mydata1
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to storage1.example.com port 443 (#0)
*   Trying 192.168.0.0... connected
* Connected to storage1.example.com (192.168.0.0) port 443 (#0)
&gt; GET /mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: storage1.example.com
&gt; Accept: */*
&gt;
  \% Total  \% Received \% Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0&lt; HTTP/1.1 401 Unauthorized
&lt; Date: Fri, 29 May 2015 18:33:29 GMT
&lt; Content-MD5:
&lt; Content-Disposition:
&lt; Content-Encoding:
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 12
&lt; Connection: close
&lt;
{ [data not shown]
  0    12    0    12    0     0   
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example 4  </b>
pullFromVoSpace over the synchronous endpoint with URL parameters
<br/>

Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -X POST "http://server.example.com/vospace/synctrans?TARGET=vos://example.com~vospace/mydata1&amp;DIRECTION=pullFromVoSpace&amp;PROTOCOL=ivo://ivoa.net/vospace/core%23httpget"
</pre></div>
(Note that the # sign in PROTOCOL is URL encoded as %23 and that the alternate separator ` ∼ ' is used instead of `!' in the TARGET) <br/><br/>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; POST /vospace/synctrans?TARGET=vos://example.com~vospace/mydata1&amp;DIRECTION=pullFromVoSpace&amp;PROTOCOL=ivo://ivoa.net/vospace/core\%23httpget HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Date: Mon, 25 May 2015 23:26:48 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Content-Type: text/xml;charset=ISO-8859-1
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;vos:transfer xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"&gt;
  &lt;vos:target&gt;vos://example.com!vospace/mydata1&lt;/vos:target&gt;
  &lt;vos:direction&gt;pullFromVoSpace&lt;/vos:direction&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"&gt;
    &lt;vos:endpoint&gt;http://storage1.example.com/trans/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
  &lt;vos:protocol uri="ivo://ivoa.net/vospace/core#httpget"&gt;
    &lt;vos:endpoint&gt;http://storage2.example.com/mydata1&lt;/vos:endpoint&gt;
  &lt;/vos:protocol&gt;
&lt;/vos:transfer&gt;
* Closing connection #0
</pre></div>
The file can be retrieved with an HTTP GET to one of the endpoints:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -o mydata1 http://storage1.example.com/mydata1
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to storage1.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to storage1.example.com (192.168.0.0) port 80 (#0)
&gt; GET /mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: storage1.example.com
&gt; Accept: */*
&gt;
  \% Total  \% Received \% Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0&lt; HTTP/1.1 401 Unauthorized
&lt; Date: Fri, 29 May 2015 18:33:29 GMT
&lt; Content-MD5:
&lt; Content-Disposition:
&lt; Content-Encoding:
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 12
&lt; Connection: close
&lt;
{ [data not shown]
  0    12    0    12    0     0   
 </pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example 5  </b>
pullFromVoSpace over the synchronous endpoint with URL parameters and REQUEST=redirect
<br/>

Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -X POST "http://server.example.com/vospace/synctrans?TARGET=vos://example.com~vospace/mydata1&amp;DIRECTION=pullFromVoSpace&amp;PROTOCOL=ivo://ivoa.net/vospace/core%23httpget&amp;REQUEST=redirect"
</pre></div>
(Note that the # sign in PROTOCOL is URL encoded as %23 and the alternate separator ` ∼ ' is used instead of `!' in the TARGET) <br/><br/>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 80 (#0)
&gt; POST /vospace/synctrans?TARGET=vos://example.com~vospace/mydata1&amp;DIRECTION=pullFromVoSpace&amp;PROTOCOL=ivo://ivoa.net/vospace/core\%23httpget&amp;REQUEST=redirect HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Fri, 29 May 2015 18:33:13 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Location: http://storage1.example.com/mydata1
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The file can be retrieved by following the redirect:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -o mydata1 http://storage1.example.com/mydata1
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to storage1.example.com port 80 (#0)
*   Trying 192.168.0.0... connected
* Connected to storage1.example.com (192.168.0.0) port 80 (#0)
&gt; GET /mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: storage1.example.com
&gt; Accept: */*
&gt;
  \% Total  \% Received \% Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0&lt; HTTP/1.1 401 Unauthorized
&lt; Date: Fri, 29 May 2015 18:33:29 GMT
&lt; Content-MD5:
&lt; Content-Disposition:
&lt; Content-Encoding:
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 12
&lt; Connection: close
&lt;
{ [data not shown]
  0    12    0    12    0     0   1717      0 --:--:-- --:--:-- --:--:--  6000* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example 6  </b>
pullFromVoSpace over the synchronous endpoint with URL parameters, REQUEST=redirect and SecurityMethod
<br/>

Request:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -X POST -E mycert.pem "https://server.example.com/vospace/synctrans?TARGET=vos://example.com~vospace/mydata1&amp;DIRECTION=pullFromVoSpace&amp;PROTOCOL=ivo://ivoa.net/vospace/core%23httpsget&amp;REQUEST=redirect&amp;SECURITYMETHOD=ivo://ivoa.net/sso%23tls-with-certificate"
</pre></div>
Since the expected response is a redirect, the initial protocol on the post is HTTPS and the certificate is supplied.<br/>
(Note that the # sign in PROTOCOL is URL encoded as %23 and that the alternate separator ` ∼ ' is used instead of `!' in the TARGET) <br/><br/>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to server.example.com port 443 (#0)
*   Trying 192.168.0.0... connected
* Connected to server.example.com (192.168.0.0) port 443 (#0)
&gt; POST /vospace/synctrans?TARGET=vos://example.com~vospace/mydata1&amp;DIRECTION=pullFromVoSpace&amp;PROTOCOL=ivo://ivoa.net/vospace/core\%23httpget&amp;REQUEST=redirect&amp;SECURITYMETHOD=ivo://ivoa.net/sso%23tls-with-certificate HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: server.example.com
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 303 See Other
&lt; Date: Fri, 29 May 2015 18:33:13 GMT
&lt; Cache-Control: private
&lt; Expires: Wed, 31 Dec 1969 16:00:00 PST
&lt; Location: https://storage1.example.com/mydata1
&lt; Content-Length: 0
&lt; Connection: close
&lt; Content-Type: text/plain
&lt;
* Closing connection #0
</pre></div>
The file can be retrieved by following the redirect:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">curl -v -o mydata1 -E mycert.pem https://storage1.example.com/mydata1
</pre></div>
Response:
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">* About to connect() to storage1.example.com port 443 (#0)
*   Trying 192.168.0.0... connected
* Connected to storage1.example.com (192.168.0.0) port 443 (#0)
&gt; GET /mydata1 HTTP/1.1
&gt; User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8y zlib/1.2.3
&gt; Host: storage1.example.com
&gt; Accept: */*
&gt;
  \% Total  \% Received \% Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0&lt; HTTP/1.1 401 Unauthorized
&lt; Date: Fri, 29 May 2015 18:33:29 GMT
&lt; Content-MD5:
&lt; Content-Disposition:
&lt; Content-Encoding:
&lt; Content-Type: text/plain;charset=UTF-8
&lt; Content-Length: 12
&lt; Connection: close
&lt;
{ [data not shown]
  0    12    0    12    0     0   1717      0 --:--:-- --:--:-- --:--:--  6000* Closing connection #0
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
      <a id="tth_sEc5.4.4"/><h4>
5.4.4  pushFromVoSpace</h4>
<a id="subsubsec:pushfromvospace">
</a>
Ask the server to send data to a remote location.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The client supplies a list of URLs and asks the server to send the data to the remote location.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
The transfer is initiated by the server, and the data transferred direct from the server to the remote location.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
This operation is OPTIONAL.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Request  </b>
A HTTP POST of a Job representation for the transfer to http://rest-endpoint/transfers

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Response  </b>
The initial response is a HTTP 303 status code with the Location header keyword assigned to the created job.
5.4.4.3 Faults

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table class="tabular"><tr><td width="197"><b>Fault description</b> </td><td align="left"><b>errorSummary</b> </td><td width="158"><b>Fault representation</b> </td></tr><tr><td width="197">Operation not supported </td><td align="left">Operation Not Supported </td><td width="158">OperationNotSupported </td></tr><tr><td width="197">Operation fails </td><td align="left">Internal Fault </td><td width="158">InternalFault </td></tr><tr><td width="197">User does not have permissions to perform the operation	 </td><td align="left">Permission Denied </td><td width="158">PermissionDenied </td></tr><tr><td width="197">Source Node does not exist </td><td align="left">Node Not Found </td><td width="158">NodeNotFound </td></tr><tr><td width="197">Service does not support the requested View </td><td align="left">View Not Supported </td><td width="158">ViewNotSupported </td></tr><tr><td width="197">Service supports none of the requested Protocols </td><td align="left">Protocol Not Supported </td><td width="158">ProtocolNotSupported </td></tr><tr><td width="197">Destination URI is invalid </td><td align="left">Invalid URI </td><td width="158">InvalidURI </td></tr><tr><td width="197">A View parameter is invalid </td><td align="left">Invalid Argument </td><td width="158">InvalidArgument </td></tr><tr><td width="197">A Protocol parameter is invalid </td><td align="left">Invalid Argument </td><td width="158">InvalidArgument </td></tr><tr><td width="197">Data transfer does not complete </td><td align="left">Transfer Failed </td><td width="158">TransferFailed </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Notes  </b>
If the Job request contains more than one protocol parameter then the service MAY fail over to use one or more of the options if the first one fails. The service SHOULD try each protocol option in turn until one succeeds or all have been tried.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>Example  </b>
pushFromVoSpace
<br/><br/>noindent
<div xmlns="http://www.w3.org/1999/xhtml" class="plain"><pre xmlns="">TO BE COMPLETED
</pre></div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
     <a id="tth_sEc5.5"/><h3>
5.5  Fault arguments</h3>
<a id="subsec:fault arguments">
</a>
Faults reported by a VOSpace service SHALL contain the following information:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>InternalFault  </b>
This is thrown with a description of the cause of the fault.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>PermissionDenied  </b>
This is thrown with a description of why the credentials (if any were provided) were rejected.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>InvalidURI  </b>
This is thrown with details of the invalid URI.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>NodeNotFound  </b>
This is thrown with the URI of the missing Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>DuplicateNode  </b>
This is thrown with the URI of the duplicate Node.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>InvalidToken  </b>
This is thrown with the invalid token.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>InvalidArgument  </b>
This is thrown with a description of the invalid argument, including the View or Protocol URI and the name and value of the parameter that caused the fault.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>TypeNotSupported  </b>
This is thrown with the QName of the unsupported type.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>ViewNotSupported  </b>
This is thrown with the uri of the View.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>InvalidData  </b>
This is thrown with any error message that the data parser produced.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>LinkFoundFault  </b>
The fault details must contain the full details of the LinkNode.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc6"/><h2>
6  Changes since last version</h2>
<a id="sec:changes since last version">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>From version 2.1-20150601:  </b>

<ul><li> Added REQUEST=redirect for further optimized pullFromVoSpace
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Added missing search element to XSD (TBD)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Changed pullToVoSpace, pushFromVoSpace to be client orchestrated. (? TBD)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Removed asynchronous pushToVoSpace and pullToVoSpace (? TBD)
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Changed Transfer in XSD to accept parameters.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Redid all webservice operation examples
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Changed XSD element authType to SecurityMethod to match IVOA standard.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Fixed text inconsistencies
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Ported source to ivoatex format
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc7"/><h2>
7  Machine readable definitions</h2>
<a id="sec:machine readable definitions">
</a>

     <a id="tth_sEc7.1"/><h3>
7.1  Message schema</h3>
<a id="subsec:message schema">
</a>
XML Schema
The requests and responses of a VOSpace 2.0 service shall adhere to the following XML Schema:

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
  <div xmlns="http://www.w3.org/1999/xhtml" class="plain">
  
<pre xmlns="">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema targetNamespace="http://www.ivoa.net/xml/VOSpace/v2.1" elementFormDefault="qualified"
    attributeFormDefault="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.1"
    xmlns:uws="http://www.ivoa.net/xml/UWS/v1.0"
    xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;xs:import namespace="http://www.ivoa.net/xml/UWS/v1.0" schemaLocation="http://www.ivoa.net/xml/UWS/v1.0"/&gt;

  &lt;!-- ======== Node types ======== --&gt;

  &lt;xs:complexType name="Node"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        The base class for all nodes.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="properties" type="vos:PropertyList" minOccurs="0" maxOccurs="1"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            The list of node properties.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;            
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="uri" type="xs:anyURI" use="required"&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;
          The node identifier URI.
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
    &lt;/xs:attribute&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="DataNode"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        The base class for data nodes.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:extension base="vos:Node"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name="accepts" type="vos:ViewList" minOccurs="0" maxOccurs="1"&gt;
            &lt;xs:annotation&gt;
              &lt;xs:documentation&gt;
                The list of views or data formats that this node can accept.
                A simple unstructured node may accept data in any format.
                A structured node may only accept data in specific formats. 
              &lt;/xs:documentation&gt;
            &lt;/xs:annotation&gt;
          &lt;/xs:element&gt;            
          &lt;xs:element name="provides" type="vos:ViewList" minOccurs="0" maxOccurs="1"&gt;
            &lt;xs:annotation&gt;
              &lt;xs:documentation&gt;
                The list of views or data formats that this node can provide.
                A simple unstructured node may only provide access to the data in the original format.
                A structured node may provide different views of the data generated by the service.
              &lt;/xs:documentation&gt;
            &lt;/xs:annotation&gt;
          &lt;/xs:element&gt;            
	  &lt;xs:element name="capabilities" type="vos:CapabilityList" minOccurs="0" maxOccurs="1"&gt;
	    &lt;xs:annotation&gt;
	      &lt;xs:documentation&gt;
	        The list of capabilities that this node can support. 
	      &lt;/xs:documentation&gt;
            &lt;/xs:annotation&gt;
          &lt;/xs:element&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="busy" type="xs:boolean" use="optional" default="false"&gt;
          &lt;xs:annotation&gt;
            &lt;xs:documentation&gt;
              A flag to indicate if the node content is available.
              This will be set to false while the data is being imported,
              or if the underlying service is busy.
            &lt;/xs:documentation&gt;
          &lt;/xs:annotation&gt;
        &lt;/xs:attribute&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:complexContent&gt;    
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="UnstructuredDataNode"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        An unstructured data node, containing unspecified content.
        The service does not need to understand or interpret the content.
        This type of node can accept any format, and only provides one view returning the original data.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:extension base="vos:DataNode"/&gt;
    &lt;/xs:complexContent&gt;    
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="StructuredDataNode"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A structured data node, containing a specific data format that the service has understands.
        This type of node may only accept specific data formats, and provide different views of the
        data generated by the service. 
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:extension base="vos:DataNode"/&gt;
    &lt;/xs:complexContent&gt;    
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="ContainerNode"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A container node containing any type of node.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:extension base="vos:DataNode"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name="nodes" minOccurs="1" maxOccurs="1"&gt;
            &lt;xs:annotation&gt;
              &lt;xs:documentation&gt;
                A list of the direct children that the container has.
              &lt;/xs:documentation&gt;
            &lt;/xs:annotation&gt;
            &lt;xs:complexType&gt;
	      &lt;xs:sequence&gt;
                &lt;xs:element name="node" type="vos:Node" minOccurs="0" maxOccurs="unbounded"/&gt;
	      &lt;/xs:sequence&gt;
	    &lt;/xs:complexType&gt;
          &lt;/xs:element&gt;
        &lt;/xs:sequence&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:complexContent&gt;    
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="LinkNode"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A node that points to another resource.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:extension base="vos:Node"&gt;
	&lt;xs:sequence&gt;
          &lt;xs:element name="target" type="xs:anyURI" minOccurs="1" maxOccurs="1"&gt;
            &lt;xs:annotation&gt;
              &lt;xs:documentation&gt;
                The identifier for the object that the LinkNode points to.
              &lt;/xs:documentation&gt;
            &lt;/xs:annotation&gt;
          &lt;/xs:element&gt;
	&lt;/xs:sequence&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:complexContent&gt;    
  &lt;/xs:complexType&gt;  

  &lt;!-- ======== Property types ======== --&gt;

  &lt;xs:complexType name="Property"&gt;
    &lt;xs:simpleContent&gt;
      &lt;xs:extension base="xs:string"&gt;
        &lt;xs:attributeGroup ref="vos:PropertyAttributeGroup"/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:simpleContent&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name="PropertyList"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A container element for a list of properties.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="property" type="vos:Property" minOccurs="0" maxOccurs="unbounded" nillable="true"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="PropertyReference"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A reference to a property description.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:attributeGroup ref="vos:PropertyAttributeGroup"/&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="PropertyReferenceList"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A container element for a list of property references.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="property" type="vos:PropertyReference" minOccurs="0" maxOccurs="unbounded" nillable="true"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:attributeGroup name="PropertyAttributeGroup"&gt;
    &lt;xs:attribute name="uri" type="xs:anyURI" use="required"&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;                    
            If the property has been registered, then the URI should point to the registration document. Third party 
            tools may use the urn:xxxx syntax to add unregistered properties.
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
    &lt;/xs:attribute&gt;
    &lt;xs:attribute name="readOnly" type="xs:boolean" use="optional" default="false"&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;
          A flag to indicate if the property is considered read-only. Attempting to modify a read-only property
          should generate a PermissionDenied fault.
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
    &lt;/xs:attribute&gt;
    &lt;!--
    &lt;xs:attribute name="xs:nil" type="xs:boolean" use="optional" default="false"&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;
          A flag to indicate if the property is null and should be deleted.
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
    &lt;/xs:attribute&gt;
    --&gt;
  &lt;/xs:attributeGroup&gt;

  &lt;xs:complexType name="GetPropertiesResponse"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="accepts" type="vos:PropertyReferenceList"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            A list of identifiers for the properties that the service accepts and understands.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="provides" type="vos:PropertyReferenceList"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            A list of identifiers for the properties that the service provides.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="contains" type="vos:PropertyReferenceList"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            A list of identifiers for all the properties currently used by nodes within the service.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;!-- ======== View types ======== --&gt;

  &lt;xs:complexType name="Param"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A view, protocol, or transfer parameter.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:simpleContent&gt;
      &lt;xs:extension base="xs:string"&gt;
        &lt;xs:attribute name="uri" type="xs:anyURI" use="required"/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:simpleContent&gt;
  &lt;/xs:complexType&gt;
    
  &lt;xs:complexType name="View"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        An element describing a view of a data-set.
        A view may just provide the original data, or it could be server generated.
        Examples of server generated views could include a votable view of data in a database table,
        or a conversion from one image format to another.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="param" type="vos:Param" minOccurs="0" maxOccurs="unbounded" nillable="true"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            A list of parameters for the view.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="uri" type="xs:anyURI" use="required"&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;
          The view URI.
          This should point to a resource describing the view format and what parameters it requires.
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
    &lt;/xs:attribute&gt;
    &lt;xs:attribute name="original" type="xs:boolean" use="optional" default="true"&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;
          A flag to indicate if the view provides access to the original data content or a derived form.
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
    &lt;/xs:attribute&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="ViewList"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A container element for a list of views.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="view" type="vos:View" minOccurs="0" maxOccurs="unbounded" nillable="true"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="GetViewsResponse"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="accepts" type="vos:ViewList"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            A list of identifiers for the views that the service can accept.
            A simple file based system may accept data in 'any' format. 
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="provides" type="vos:ViewList"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            A list of identifiers for the views that the service can provide.
            A simple file based system may only provide data in the original format.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;!-- ======== Protocol types ======== --&gt;

  &lt;xs:complexType name="Protocol"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A protocol element, containing the protocol URI, the endpoint and any protocol specific parameters.  
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="endpoint" type="xs:anyURI" minOccurs="0" maxOccurs="1"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            The target endpoint to use for a data transfer.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="param" type="vos:Param" minOccurs="0" maxOccurs="unbounded" nillable="true"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            Any additional protocol specific parameters required to use the endpoint.
            For example, the user name or password to use for ftp access.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="securityMethod" type="vos:SecurityMethod" minOccurs="0" maxOccurs="unbounded" nillable="true"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            the mechanism the client must employ to gain secure access to the service.  
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="uri" type="xs:anyURI" use="required"&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;
          The protocol identifier.
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
    &lt;/xs:attribute&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="SecurityMethod"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        a description of a security mechanism.
      &lt;/xs:documentation&gt;
      &lt;xs:documentation&gt;
        this type only allows one to refer to the mechanism via a
        URI.  Derived types would allow for more metadata.  
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:attribute name="uri" type="xs:anyURI"&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;
          A URI identifier for a standard security mechanism. 
        &lt;/xs:documentation&gt;
        &lt;xs:documentation&gt;
          This provides a unique way to refer to a security
          specification standard.
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
    &lt;/xs:attribute&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="ProtocolList"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A container element for a list of protocols.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="protocol" type="vos:Protocol" minOccurs="0" maxOccurs="unbounded" nillable="true"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="GetProtocolsResponse"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="accepts" type="vos:ProtocolList"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            A list of identifiers for the protocols that the service can accept.
            This means that the service can act as a client for the protocol. 
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="provides" type="vos:ProtocolList"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            A list of identifiers for the protocols that the service can provide.
            This means that the service can act as a server for the protocol. 
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;!-- ======== Capability types ======== --&gt;

  &lt;xs:complexType name="Capability"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A capability element, containing the capability URI, the
    endpoint and any capability specific parameters(?).
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="endpoint" type="xs:anyURI" minOccurs="0" maxOccurs="1"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            The target endpoint to use for the third-part interface.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;!--+
       | Uncommented Capability params.
       +--&gt;
      &lt;xs:element name="param" type="vos:Param" minOccurs="0" maxOccurs="unbounded" nillable="true"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            Any additional capability specific parameters required to use the endpoint.
            For example, the user name or password to use for access.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name="uri" type="xs:anyURI" use="required"&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;
          The capability identifier.
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
    &lt;/xs:attribute&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="CapabilityList"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A container element for a list of capabilities.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="capability" type="vos:Capability" minOccurs="0" maxOccurs="unbounded" nillable="true"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;!-- ======== Node list type ======== --&gt;
    
  &lt;xs:complexType name="NodeList"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A container element for search responses.
    &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="nodes" minOccurs="0" maxOccurs="1"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            The list of nodes.
          &lt;/xs:documentation&gt;
	&lt;/xs:annotation&gt;
	&lt;xs:complexType&gt;
	  &lt;xs:sequence&gt;
	    &lt;xs:element name="node" type="vos:Node" minOccurs="0" maxOccurs="unbounded"&gt;
	      &lt;xs:annotation&gt;
		&lt;xs:documentation&gt;
	          At the maximum level of detail this will be replaced by the full element for the extended type,
                 using xsi:type to indicate the node type/
		&lt;/xs:documentation&gt;
	      &lt;/xs:annotation&gt;
	    &lt;/xs:element&gt;
          &lt;/xs:sequence&gt;
	&lt;/xs:complexType&gt;
      &lt;/xs:element&gt;	      
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;!-- ======== Transfer type ======== --&gt;

  &lt;xs:complexType name="Transfer"&gt;
    &lt;xs:annotation&gt;
      &lt;xs:documentation&gt;
        A container element for transfer operations.
    &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name="target" type="xs:anyURI" minOccurs="1" maxOccurs="1"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            The target of a transfer operation - the node to/from which data is to be transferred.
          &lt;/xs:documentation&gt;
	&lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="direction" minOccurs="0" maxOccurs="1"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            The direction of a data transfer - either a URI or one of the specified directions
          &lt;/xs:documentation&gt;
	&lt;/xs:annotation&gt;
        &lt;xs:simpleType&gt;
          &lt;xs:union&gt;
            &lt;xs:simpleType&gt;
              &lt;xs:restriction base="xs:anyURI"/&gt;
            &lt;/xs:simpleType&gt;
            &lt;xs:simpleType&gt;   
              &lt;xs:restriction base="xs:string"&gt;
                &lt;xs:enumeration value="pushToVoSpace"/&gt;
                &lt;xs:enumeration value="pushFromVoSpace"/&gt;
                &lt;xs:enumeration value="pullToVoSpace"/&gt;
                &lt;xs:enumeration value="pullFromVoSpace"/&gt;
              &lt;/xs:restriction&gt;
            &lt;/xs:simpleType&gt;
          &lt;/xs:union&gt;
        &lt;/xs:simpleType&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="view" type="vos:View" minOccurs="0" maxOccurs="1"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            The requested view for the transfer.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="protocol" type="vos:Protocol" minOccurs="0" maxOccurs="unbounded"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            The transfer protocol(s) to use.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name="keepBytes" type="xs:boolean" minOccurs="0" maxOccurs="1"&gt;
        &lt;xs:annotation&gt;
          &lt;xs:documentation&gt;
            Indicates whether the source object is to be kept in an internal transfer, i.e., distinguishes between a move and a copy.
          &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;        
      &lt;/xs:element&gt;
      &lt;xs:element name="param" type="vos:Param" minOccurs="0" maxOccurs="unbounded" nillable="true"&gt;
          &lt;xs:annotation&gt;
            &lt;xs:documentation&gt;
              Any additional transfer specific parameters required to use the endpoint.
              For example, the size of the file on a pushToVoSpace transfer.
            &lt;/xs:documentation&gt;
          &lt;/xs:annotation&gt;
        &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;!-- ======== Response representations ======== --&gt;

  &lt;xs:element name="protocols" type="vos:ProtocolList"/&gt;

  &lt;xs:element name="views" type="vos:ViewList"/&gt;

  &lt;xs:element name="properties" type="vos:PropertyList"/&gt;

  &lt;xs:element name="transfer" type="vos:Transfer"/&gt;
 
  &lt;xs:element name="searchDetails" type="vos:NodeList"/&gt;
&lt;/xs:schema&gt;

</pre>
  </div>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc8"/><h2>
8  Compliance matrix</h2>
<a id="sec:compliance matrix">
</a>
This table summarizes the mandatory behaviour required of a fully compliant VOSpace 2.0 service, i.e. those operations denoted as SHALL and MUST occurring. Note that for faults the general condition is specified but specific details should be checked in the relevant sections. Those associated with optional features are marked with an asterisk in the appropriate section reference - if the service implements an optional feature then it must show this mandatory behaviour.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table border="1" class="tabular"><tr><td width="39"><b>Item</b> </td><td width="434"><b>Description</b> </td><td width="158"><b>Occurs in section(s)</b> </td></tr><tr><td width="39">1 </td><td width="434">VOSpace node identifiers are a URI with the scheme vos:// </td><td width="158"> <a href="#sec:vospace identifiers">2</a> </td></tr><tr><td width="39">2 </td><td width="434">The naming authority for a VOSpace node URI is the VOSpace service through which the node was created </td><td width="158"> <a href="#sec:vospace identifiers">2</a> </td></tr><tr><td width="39">3 </td><td width="434">"!" or " ∼ " are used consistently in VOSpace node URIs </td><td width="158"> <a href="#sec:vospace identifiers">2</a> </td></tr><tr><td width="39">4 </td><td width="434">"!" or " ∼ " are valid separator characters in service requests </td><td width="158"> <a href="#sec:vospace identifiers">2</a> </td></tr><tr><td width="39">5 </td><td width="434">All ancestors in a node hierarchy are resolvable as containers </td><td width="158"> <a href="#sec:vospace identifiers">2</a> </td></tr><tr><td width="39">6 </td><td width="434">The bit pattern for data stored in an UnstructuredDataNode is identical for read/write operations </td><td width="158"> <a href="#subsec:nodes and node types">3.1</a>* </td></tr><tr><td width="39">7 </td><td width="434">A Node has elements: uri, properties and capabilities </td><td width="158"> <a href="#subsec:nodes and node types">3.1</a> </td></tr><tr><td width="39">8 </td><td width="434">A DataNode has elements: uri, properties, capabilities, accepts, provides </td><td width="158"> <a href="#subsec:nodes and node types">3.1</a> </td></tr><tr><td width="39">9 </td><td width="434">A LinkNode has elements: uri, properties, capabilities and target </td><td width="158"> <a href="#subsec:nodes and node types">3.1</a>* </td></tr><tr><td width="39">10 </td><td width="434">A ContainerNode and a LinkNode have no data bytes associated with them </td><td width="158"> <a href="#subsec:nodes and node types">3.1</a>* </td></tr><tr><td width="39">11 </td><td width="434">A VOSpace service parses XML representations of all node types </td><td width="158">  </td></tr><tr><td width="39">12 </td><td width="434">A VOSpace services does not throw a XML parser error in response to requests about unsupported node types </td><td width="158"> <a href="#subsec:nodes and node types">3.1</a> </td></tr><tr><td width="39">13 </td><td width="434">A Property has elements:uri, endpoint and optional readonly flag </td><td width="158"> <a href="#subsec:properties">3.2</a> </td></tr><tr><td width="39">14 </td><td width="434">URIs must be valid (and unique) </td><td width="158"> <a href="#subsubsec:property identifiers">3.2.2</a>,  <a href="#subsubsec:capability identifiers">3.3.2</a>,  <a href="#subsubsec:view identifiers">3.4.2</a>,  <a href="#subsubsec:protocol identifiers">3.5.1</a>,  <a href="#subsubsec:createnode">5.2.1</a>,  <a href="#subsubsec:pushtovospace">5.4.1</a>,  <a href="#subsubsec:pulltovospace">5.4.2</a> </td></tr><tr><td width="39">15 </td><td width="434">A Capability has elements: uri, endpoint and param </td><td width="158"> <a href="#subsec:capabilities">3.3</a> </td></tr><tr><td width="39">16 </td><td width="434">Standard capabilities are represented by the specified URIs </td><td width="158"> <a href="#subsubsec:standard capabilities">3.3.5</a> </td></tr><tr><td width="39">17 </td><td width="434">Each Property is identified by a unique URI </td><td width="158"> <a href="#subsubsec:property identifiers">3.2.2</a> </td></tr><tr><td width="39">18 </td><td width="434">Each Capability is identified by a unique URI </td><td width="158"> <a href="#subsubsec:capability identifiers">3.3.2</a> </td></tr><tr><td width="39">19 </td><td width="434">Each View is identified by a unique URI </td><td width="158"> <a href="#subsubsec:view identifiers">3.4.2</a> </td></tr><tr><td width="39">20 </td><td width="434">Each Protocol is identified by a unique URI </td><td width="158"> <a href="#subsubsec:protocol identifiers">3.5.1</a> </td></tr><tr><td width="39">21 </td><td width="434">Standard views are represented by the specified URIs </td><td width="158"> <a href="#subsubsec:default views">3.4.4</a> </td></tr><tr><td width="39">xx </td><td width="434">Standard properties are represented by the specified URIs </td><td width="158"> <a href="#subsubsec:standard properties">3.2.4</a> </td></tr><tr><td width="39">22 </td><td width="434">Data imported with the default View is treated as a binary BLOB </td><td width="158"> <a href="#subsubsec:default views">3.4.4</a> </td></tr><tr><td width="39">23 </td><td width="434">Data exported with the default export View is returned in the most appropriate format </td><td width="158"> <a href="#subsubsec:default views">3.4.4</a> </td></tr><tr><td width="39">24 </td><td width="434">An archive format View on a ContainerNode provides access to the archive contents as children nodes of the container </td><td width="158"> <a href="#subsubsec:container views">3.4.5</a>* </td></tr><tr><td width="39">25 </td><td width="434">An archive format View specified in a data export operation on a ContainerNode will package the contents of the container and all its child nodes </td><td width="158"> <a href="#subsubsec:container views">3.4.5</a>* </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table border="1" class="tabular"><tr><td width="39"><b>Item</b> </td><td width="434"><b>Description</b> </td><td width="158"><b>Occurs in section(s)</b> </td></tr><tr><td width="39">26 </td><td width="434">A Protocol has elements: uri and and endpoint </td><td width="158"> <a href="#subsec:protocols">3.5</a> </td></tr><tr><td width="39">27 </td><td width="434">text/xml are represented by the specified URIs </td><td width="158">  </td></tr><tr><td width="39">28 </td><td width="434">A Transfer UWS Job representation has elements: target, direction, view, protocol and keepBytes </td><td width="158"> <a href="#subsec:transfers">3.6</a> </td></tr><tr><td width="39">29 </td><td width="434">A Transfer results representation has elements: target, direction, view, and protocol </td><td width="158"> <a href="#subsec:transfers">3.6</a> </td></tr><tr><td width="39">30 </td><td width="434">A server responds with a fault if it is unable to handle any of the requested protocols in a data transfer </td><td width="158"> <a href="#subsubsec:service-initiated transfers">3.6.3</a>,  <a href="#subsubsec:client-initiated transfers">3.6.4</a> </td></tr><tr><td width="39">31 </td><td width="434">A server uses each requested protocol only once in a data transfer </td><td width="158"> <a href="#subsubsec:service-initiated transfers">3.6.3</a>,  <a href="#subsubsec:client-initiated transfers">3.6.4</a> </td></tr><tr><td width="39">32 </td><td width="434">A data transfer is complete once a specified protocol is successful </td><td width="158"> <a href="#subsubsec:service-initiated transfers">3.6.3</a>,  <a href="#subsubsec:client-initiated transfers">3.6.4</a> </td></tr><tr><td width="39">33 </td><td width="434">A data transfer has failed if none of the specified protocols has been successful </td><td width="158"> <a href="#subsubsec:service-initiated transfers">3.6.3</a>,  <a href="#subsubsec:client-initiated transfers">3.6.4</a> </td></tr><tr><td width="39">34 </td><td width="434">A server updates the status flag in the UWS Job representation as appropriate </td><td width="158"> <a href="#subsubsec:service-initiated transfers">3.6.3</a>,  <a href="#subsubsec:client-initiated transfers">3.6.4</a> </td></tr><tr><td width="39">35 </td><td width="434">A Search UWS Job representation has elements: uri, limit, detail, matches and node </td><td width="158"> <a href="#subsec:searches">3.7</a>* </td></tr><tr><td width="39">36 </td><td width="434">A Search results representation has elements: nodes </td><td width="158"> <a href="#subsec:searches">3.7</a>* </td></tr><tr><td width="39">37 </td><td width="434">A VOSpace service has the REST bindings: properties, views, protocols, searches, nodes, and transfers </td><td width="158"> <a href="#subsec:rest bindings">3.8</a> </td></tr><tr><td width="39">38 </td><td width="434">Access policies on a VOSpace service are declared in the registered metadata for the service </td><td width="158"> <a href="#sec:access control">4</a> </td></tr><tr><td width="39">39 </td><td width="434">VOSpace authentication employs IVOA SSO supported methods </td><td width="158"> <a href="#sec:access control">4</a> </td></tr><tr><td width="39">40 </td><td width="434">A VOSpace service supports the operations: getProtocols, getViews, getProperties, createNode, deleteNode, moveNode, copyNode, getNode, setNode, pullFromVoSpace. The following are optional operations: findNodes, pushToVoSpace, pullToVoSpace, pushFromVoSpace </td><td width="158"> <a href="#subsubsec:getprotocols">5.1.1</a>,  <a href="#subsubsec:getviews">5.1.2</a>,  <a href="#subsubsec:getproperties">5.1.3</a>,  <a href="#subsubsec:createnode">5.2.1</a>,  <a href="#subsubsec:movenode">5.2.2</a>,  <a href="#subsubsec:copynode">5.2.3</a>,  <a href="#subsubsec:deletenode">5.2.4</a>,  <a href="#subsubsec:getnode">5.3.1</a>,  <a href="#subsubsec:setnode">5.3.2</a>,  *,  <a href="#subsubsec:pushtovospace">5.4.1</a>*,  <a href="#subsubsec:pushtovospace">5.4.1</a>*,  <a href="#subsubsec:pullfromvospace">5.4.3</a>,  <a href="#subsubsec:pushfromvospace">5.4.4</a>* </td></tr><tr><td width="39">41 </td><td width="434">accepts and provides specify entities that the service supports </td><td width="158"> <a href="#subsubsec:getprotocols">5.1.1</a>,  <a href="#subsubsec:getviews">5.1.2</a>,  <a href="#subsubsec:getproperties">5.1.3</a> </td></tr><tr><td width="39">42 </td><td width="434">An autogenerated URI is specified as a result in the Results List </td><td width="158"> <a href="#subsubsec:createnode">5.2.1</a>*,  <a href="#subsubsec:movenode">5.2.2</a>*,  <a href="#subsubsec:copynode">5.2.3</a>*,  <a href="#subsubsec:pushtovospace">5.4.1</a>* </td></tr><tr><td width="39">43 </td><td width="434">Any data written to the reserved URI .null is discarded </td><td width="158"> <a href="#subsec:rest bindings">3.8</a> </td></tr><tr><td width="39">44 </td><td width="434">accepts is filled in based on service capabilities </td><td width="158"> <a href="#subsubsec:createnode">5.2.1</a> </td></tr><tr><td width="39">45 </td><td width="434">If a container is deleted then so are its children </td><td width="158"> <a href="#subsubsec:deletenode">5.2.4</a> </td></tr><tr><td width="39">46 </td><td width="434">If a container is listed, only direct children are listed </td><td width="158"> <a href="#subsubsec:getnode">5.3.1</a> </td></tr><tr><td width="39">47 </td><td width="434">Results are drawn from the same ordered sequence in any ordering imposed by the server </td><td width="158"> <a href="#subsubsec:getnode">5.3.1</a> </td></tr><tr><td width="39">48 </td><td width="434">Regex expressions comply with POSIX conventions </td><td width="158"> <a href="#subsec:searches">3.7</a> </td></tr><tr><td width="39">49 </td><td width="434">Moving a container moves its children as well </td><td width="158"> <a href="#subsubsec:movenode">5.2.2</a> </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table border="1" class="tabular"><tr><td width="39"><b>Item</b> </td><td width="434"><b>Description</b> </td><td width="158"><b>Occurs in section(s)</b> </td></tr><tr><td width="39">50 </td><td width="434">Importing data into an existing container puts the new data within the container </td><td width="158"> <a href="#subsubsec:pushtovospace">5.4.1</a> </td></tr><tr><td width="39">51 </td><td width="434">Node types are not changed when a node is moved or copied </td><td width="158"> <a href="#subsubsec:movenode">5.2.2</a>,  <a href="#subsubsec:copynode">5.2.3</a> </td></tr><tr><td width="39">52 </td><td width="434">Copying a container copies its children as well </td><td width="158"> <a href="#subsubsec:copynode">5.2.3</a> </td></tr><tr><td width="39">53 </td><td width="434">Importing data into an existing node overwrites any preexisting data (unless it is a container) </td><td width="158"> <a href="#subsubsec:pushtovospace">5.4.1</a>*,  <a href="#subsubsec:pulltovospace">5.4.2</a>* </td></tr><tr><td width="39">54 </td><td width="434">A HTTP 200 status code is returned if the operation completes successfully </td><td width="158"> <a href="#subsubsec:getprotocols">5.1.1</a>,  <a href="#subsubsec:getviews">5.1.2</a>,  <a href="#subsubsec:getproperties">5.1.3</a>,  <a href="#subsubsec:createnode">5.2.1</a>,  <a href="#subsubsec:deletenode">5.2.4</a>,  <a href="#subsubsec:getnode">5.3.1</a>,  <a href="#subsubsec:setnode">5.3.2</a> </td></tr><tr><td width="39">55 </td><td width="434">A HTTP 303 status code is returned if the operation completes successfully </td><td width="158"> <a href="#subsubsec:movenode">5.2.2</a>,  <a href="#subsubsec:copynode">5.2.3</a>,  *,  <a href="#subsubsec:pushtovospace">5.4.1</a>*,  <a href="#subsubsec:pulltovospace">5.4.2</a>*,  <a href="#subsubsec:pullfromvospace">5.4.3</a>,  <a href="#subsubsec:pushfromvospace">5.4.4</a>* </td></tr><tr><td width="39">56 </td><td width="434">A HTTP 500 status code with an InternalFault fault in the body is thrown if the operation fails </td><td width="158"> <a href="#subsubsec:getprotocols">5.1.1</a>,  <a href="#subsubsec:getviews">5.1.2</a>,  <a href="#subsubsec:getproperties">5.1.3</a>,  <a href="#subsubsec:createnode">5.2.1</a>,  <a href="#subsubsec:deletenode">5.2.4</a>,  <a href="#subsubsec:getnode">5.3.1</a>,  <a href="#subsubsec:setnode">5.3.2</a>,  <a href="#subsubsec:pullfromvospace">5.4.3</a> </td></tr><tr><td width="39">57 </td><td width="434">A HTTP 400 status code with an InvalidArgument fault in the body is thrown if a specified value is invalid </td><td width="158"> <a href="#subsubsec:setnode">5.3.2</a> </td></tr><tr><td width="39">58 </td><td width="434">A HTTP 400 status code with an InvalidURI fault in the body is thrown if the specified URI is invalid </td><td width="158"> <a href="#subsubsec:createnode">5.2.1</a> </td></tr><tr><td width="39">59 </td><td width="434">A HTTP 400 status code with a TypeNotSupported fault in the body is thrown if the specified type is not supported </td><td width="158"> <a href="#subsubsec:createnode">5.2.1</a> </td></tr><tr><td width="39">60 </td><td width="434">A HTTP 403 status code with a PermissionDenied fault in the body is thrown if the user does not have permission to perform the operation </td><td width="158"> <a href="#subsubsec:createnode">5.2.1</a>,  <a href="#subsubsec:deletenode">5.2.4</a>,  <a href="#subsubsec:getnode">5.3.1</a>,  <a href="#subsubsec:setnode">5.3.2</a>,  <a href="#subsubsec:pullfromvospace">5.4.3</a> </td></tr><tr><td width="39">61 </td><td width="434">A HTTP 404 status code with a NodeNotFound fault in the body is thrown if... </td><td width="158"> <a href="#subsubsec:movenode">5.2.2</a>,  <a href="#subsubsec:getnode">5.3.1</a>,  <a href="#subsubsec:copynode">5.2.3</a>,  <a href="#subsubsec:pullfromvospace">5.4.3</a> </td></tr><tr><td width="39">62 </td><td width="434">A HTTP 409 status code with a DuplicateFault fault in the body is thrown if the specified node already exists </td><td width="158"> <a href="#subsubsec:createnode">5.2.1</a> </td></tr><tr><td width="39">63 </td><td width="434">A HTTP 404 status code with a ContainerNotFound fault in the body is thrown if a container is not found </td><td width="158"> <a href="#subsubsec:createnode">5.2.1</a>,  <a href="#subsubsec:deletenode">5.2.4</a> </td></tr><tr><td width="39">64 </td><td width="434">A HTTP 400 status code with a LinkFound fault in the body is thrown if a LinkNode is found </td><td width="158"> <a href="#subsubsec:createnode">5.2.1</a>,  <a href="#subsubsec:deletenode">5.2.4</a> </td></tr><tr><td width="39">65 </td><td width="434">The PHASE in the UWS Job representation is set to ËRROR" in case of a fault occurring </td><td width="158"> <a href="#subsubsec:movenode">5.2.2</a>,  *,  <a href="#subsubsec:pushtovospace">5.4.1</a>*,  <a href="#subsubsec:pulltovospace">5.4.2</a>*,  <a href="#subsubsec:pullfromvospace">5.4.3</a>,  <a href="#subsubsec:pushfromvospace">5.4.4</a>* </td></tr><tr><td width="39">66 </td><td width="434">The errorSummary element in the UWS Job representation is set to the appropriate value for the type of fault occurring </td><td width="158"> <a href="#subsubsec:movenode">5.2.2</a>,  *,  <a href="#subsubsec:pushtovospace">5.4.1</a>*,  <a href="#subsubsec:pulltovospace">5.4.2</a>*,  <a href="#subsubsec:pullfromvospace">5.4.3</a>,  <a href="#subsubsec:pushfromvospace">5.4.4</a>* </td></tr><tr><td width="39">67 </td><td width="434">The appropriate fault representation is provided at the error URI for the job </td><td width="158"> <a href="#subsubsec:movenode">5.2.2</a>,  *,  <a href="#subsubsec:pushtovospace">5.4.1</a>*,  <a href="#subsubsec:pulltovospace">5.4.2</a>*,  <a href="#subsubsec:pullfromvospace">5.4.3</a>,  <a href="#subsubsec:pushfromvospace">5.4.4</a>* </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc9"/><h2>
9  Standard properties</h2>
<a id="sec:standard properties">
</a>
This table summarizes the standard properties that SHALL be recognized by a VOSpace service and are registered in the IVOA Registry of Registries.

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<table border="1" class="tabular"><tr><td width="316"><b>Property</b> </td><td width="316"><b>Description</b> </td><td width="79"><b>Data type</b> </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#availableSpace </td><td width="316">the amount of space available within a container </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#btime </td><td width="316">the initial creation time </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#contributor </td><td width="316">an entity responsible for making contributions to this resource </td><td width="79">URI </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#coverage </td><td width="316">a spatial or temporal topic of the resource, the spatial applicability of the resource, or the jurisdiction under which the resource is relevant </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#creator </td><td width="316">an entity primarily responsible for making the resource </td><td width="79">URI </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#ctime </td><td width="316">the status change (aka metadata modification) time </td><td width="79">datetime </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#date </td><td width="316">a point or period of time associated with an event in the lifecycle of the resource </td><td width="79">datetime </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#description </td><td width="316">an account of the resource </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#format </td><td width="316">the file format, physical medium or dimensions of the resource </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#groupread </td><td width="316">the list of groups which can only read this resource </td><td width="79">delimiter-separated list </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#groupwrite </td><td width="316">the list of groups which can read and write to this resource </td><td width="79">delimiter-separated list </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#identifier </td><td width="316">an unambiguous reference to the resource within a given context </td><td width="79">string/URI </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#language </td><td width="316">a language of the resource </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#length </td><td width="316">the length or size of a resource </td><td width="79">float </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#mtime </td><td width="316">the data modification time </td><td width="79">datetime </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#publicread </td><td width="316">whether this resource is world readable </td><td width="79">boolean </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#publisher </td><td width="316">an entity responsible for making the resource available </td><td width="79">uri </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#quota </td><td width="316">the value of a system quota on the resource </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#relation </td><td width="316">a related resource </td><td width="79">URI </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#rights </td><td width="316">information about rights held in and over the resource </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#source </td><td width="316">a related resource from which the described resource is derived </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#subject </td><td width="316">the topic of the resource </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#title </td><td width="316">a name given to the resource </td><td width="79">string </td></tr><tr><td width="316">ivo://ivoa.net/vospace/core#type </td><td width="316">the nature or genre of the resource </td><td width="79">string </td></tr></table><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
 <a id="tth_sEc10"/><h2>
10  Changes from Previous Versions</h2>
<a id="sec:changes from previous versions">
</a>

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>From version 2.1-20140805:  </b>

<ul><li> Addition of optimized HTTP GET method of data transfer for pushToVoSpace, pullFromVoSpace
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Addition of authType to Protocol in XML schema for transfer negotiation.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Added preliminary list of standard authType URIs
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Deprecated view=data convenience method of data transfer
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Corrections to minor XML format errors in the examples throughout the document.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>From version 2.00-20120824:  </b>

<ul><li> Use of Resource Idenfifier and CDP in Architecture diagram clarified.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> StandardID defined for this version.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Various formatting issues.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Use of HTTP 500 status code clarified.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> HTTP response codes made consistent with RFC 2616.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>From version 2.00-20111202:  </b>

<ul><li> Clarified use of URI fragments
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Added appendix of standard properties
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Clarified multi-value properties
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Added 404 error codes to getNode and setNode for no parent container ensuring consistent behaviour
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Adjusted pushToVoSpace and pullFromVoSpace convenience methods for self consistency and closer matching to UWS Fault formatting.
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>From version 2.00-20110628:  </b>

<ul><li> Corrected REST binding for synchronous transfer details
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Added endpoint for synchronous job POSTs
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Added properties mtime, ctime, btime
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Changed text to describe use of StandardsRegExt for standard properties, views, capabilities, tranfer protocols
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Changed error code on ContainerNotFound and LinkFound faults
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Added correct failure response for unsupported operations
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>From version 2.00-20101112:  </b>

<ul><li> Examples amended with correct namespaces and root elements
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> " ∼ " listed as a valid URI separator character along with "!"
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Core property list added to
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Properties with multiple values clarified
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Optional operations clarified and indicated in conformance matrix
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> getNode and findNode operation arguments made consistent
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Synchronous HTTP PUT method added
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> createNode response changed to HTTP 200 from HTTP 201
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> /transferDetails endpoint added
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Support for .auto made optional
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<b>From version 2.00-20100323:  </b>

<ul><li> Updated UWS details: use uws:jobInfo instead of uws:parameters
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Added IVOA architecture text
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>

<li> Removed text about WSDL/WADL
<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
</li>
</ul><p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>
No previous versions yet.  

<p xmlns="http://www.w3.org/1999/xhtml" class="parsep"><span/></p>

<br/><br/><hr/><small>File translated from
T<sub><span class="small">E</span></sub>X
by <a href="http://hutchinson.belmont.ma.us/tth/">
T<sub><span class="small">T</span></sub>H</a>,
version 4.08.<br/>On  7 Jun 2015, 12:29.</small>
</div></html>
